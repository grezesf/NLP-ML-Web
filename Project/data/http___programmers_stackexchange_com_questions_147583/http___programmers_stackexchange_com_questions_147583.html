<!DOCTYPE html>
<html>
<head>
    
    <title>web development - Best way to parse a file - Programmers Stack Exchange</title>
    <link rel="shortcut icon" href="//cdn.sstatic.net/programmers/img/favicon.ico">
    <link rel="apple-touch-icon image_src" href="//cdn.sstatic.net/programmers/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Programmers Stack Exchange" href="/opensearch.xml">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@StackProgrammer" />
    <meta name="twitter:domain" content="programmers.stackexchange.com"/>
    <meta name="og:type" content="website" />
    <meta name="og:image" content="http://cdn.sstatic.net/programmers/img/apple-touch-icon@2.png?v=8a6d048f3c78"/>
    <meta name="og:title" content="Best way to parse a file" />
    <meta name="og:description" content="I&#39;m trying to find a better solution for making a parser to some of the famous file formats out there such as: EDIFACT and TRADACOMS.

If you aren&#39;t familiar with these standards then check out this " />
    <meta name="og:url" content="http://programmers.stackexchange.com/questions/147583/best-way-to-parse-a-file"/>
    <link rel="canonical" href="http://programmers.stackexchange.com/questions/147583/best-way-to-parse-a-file" />

    
    
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//cdn.sstatic.net/Js/stub.en.js?v=e3d47b73fa12" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.sstatic.net/programmers/all.css?v=a937ba87a7fe">
    
    <link rel="alternate" type="application/atom+xml" title="Feed for question &#39;Best way to parse a file&#39;" href="/feeds/question/147583">
    <script type="text/javascript">
        
        StackExchange.ready(function () {
            StackExchange.using("postValidation", function () {
                StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
            });

            
            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:1,shownCommentCount:1,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:147583});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('131', '147583');
            
                    });
    </script>


    <script type="text/javascript">
        StackExchange.ready(function () {
            StackExchange.realtime.init('wss://qa.sockets.stackexchange.com,ws://qa.sockets.stackexchange.com');
            StackExchange.realtime.subscribeToInboxNotifications();
                    StackExchange.realtime.subscribeToReputationNotifications('131');
                        });
    </script>
    <script type="text/javascript">
        StackExchange.init({"locale":"en","stackAuthUrl":"https://stackauth.com","serverTime":1385134283,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Programmers Stack Exchange","description":"Q&A for professional programmers interested in conceptual questions about software development","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdsB7sSAAAAAAzjgEF_Hd8vXv-C42sa_KyofaGR","enableSocialMediaInSharePopup":true},"user":{"fkey":"f51c005c36aeb04be7163e16a81b52d5","isAnonymous":true}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.en.js":"e0bbd4760e83","js/moderator.en.js":"1a411fd265fe","js/full-anon.en.js":"2435f0d168c4","js/full.en.js":"e4b72ebdc18f","js/wmd.en.js":"bd9234d44a40","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/third-party/jquery.autocomplete.min.en.js":"","js/mobile.en.js":"d1d834ef85d2","js/help.en.js":"d3cc74d8a93a","js/tageditor.en.js":"6d51a5f8d7f3","js/tageditornew.en.js":"111b781cf314","js/inline-tag-editing.en.js":"f951bd09dc69","js/revisions.en.js":"33fd38144303","js/review.en.js":"f45b4ec094ea","js/tagsuggestions.en.js":"e4e7b952fcc7","js/post-validation.en.js":"c275fe37d674","js/explore-qlist.en.js":"73825bd006fc","js/events.en.js":"53bc48767091"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
        
    </script>
    
        <script type="text/javascript">
            StackExchange.ready(function () {
                $('#nav-tour').click(function () {
                    StackExchange.using("gps", function() {
                        StackExchange.gps.track("aboutpage.click", { aboutclick_location: "headermain" }, true);
                    });
                });
            });
        </script>
</head>
<body class="question-page">
    <noscript><div id="noscript-padding"></div></noscript>
    <div id="notify-container"></div>
    <div id="overlay-header"></div>
    <div id="custom-header"></div>
    <div class="container">
        <div id="header" class=headeranon>
            <div id="portalLink">
                <a class="genu" href="http://stackexchange.com" onclick="StackExchange.ready(function(){genuwine.click();});return false;">Stack Exchange</a>
            </div>
            <div id="topbar">
                <div id="hlinks">
                    
<span id="hlinks-user"></span>
<span id="hlinks-nav">                        <a href="/users/login?returnurl=%2fquestions%2f147583%2fbest-way-to-parse-a-file">sign up</a>

 <span class="lsep">|</span>
                    <a href="/users/login?returnurl=%2fquestions%2f147583%2fbest-way-to-parse-a-file">log in</a>

 <span class="lsep">|</span>
</span>
<span id="hlinks-custom"></span>
                </div>
                <div id="hsearch">
                    <form id="search" action="/search" method="get" autocomplete="off">
                        <div>
                            <input autocomplete="off" name="q" class="textbox" placeholder="search" tabindex="1" type="text" maxlength="240" size="28" value="">
                        </div>
                    </form>
                </div>
            </div>
            <br class="cbt">
            <div id="hlogo">
                <a href="/">
                    Programmers
                </a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs mainnavsanon">
                    <ul>
                            <li class="youarehere"><a id="nav-questions" href="/questions">Questions</a></li>
                            <li><a id="nav-tags" href="/tags">Tags</a></li>
                            <li><a id="nav-tour" href="/about">Tour</a></li>
                            <li><a id="nav-users" href="/users">Users</a></li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion"  href="/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        



        <div id="content">
            

<div itemscope itemtype="http://schema.org/Article">
	<link itemprop="image" href="//cdn.sstatic.net/programmers/img/apple-touch-icon.png">
			<!--googleoff: all-->
<div id="herobox-mini">
    <div id="hero-content">
        <span id="controls">
            <a href="/about" id="tell-me-more" class="button">Tell me more</a>
            <span id="close"><a title="click to dismiss">&times;</a></span>
        </span>
        <div id="blurb">
            Programmers Stack Exchange is a question and answer site for professional programmers interested in conceptual questions about software development. It&#39;s 100% free, no registration required.
        </div>        
    </div>
    <script>
        $('#tell-me-more').click(function () {
            var clickSource = $("body").attr("class") + '-mini';
            if ($("body").hasClass("questions-page")) {
                clickSource = 'questionpagemini';
            }
            if ($("body").hasClass("home-page")) {
                clickSource = 'homepagemini';
            }

            StackExchange.using("gps", function () {
                StackExchange.gps.track("aboutpage.click", { aboutclick_location: clickSource } , true);
            });
        });
        $('#herobox-mini #close').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: "close" }, true);
            });
            $.cookie("hero", "none", { path: "/" });
            var $hero = $("#herobox-mini");
            $hero.slideUp('fast', function () { $hero.remove(); });
            return false;
        });
    </script>
</div>
			<!--googleon: all-->
			<div id="question-header">
			<h1 itemprop="name"><a href="/questions/147583/best-way-to-parse-a-file" class="question-hyperlink">Best way to parse a file</a></h1>
		</div>
			<div id="mainbar">

			

<div class="question" data-questionid="147583"  id="question">
    
        <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="147583">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear">up vote</a>
    <span class="vote-count-post ">6</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful">down vote</a>
    
    <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b>2</b></div>   

</div>

            </td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="description">

        <p>I'm trying to find a better solution for making a parser to some of the famous file formats out there such as: <a href="http://en.wikipedia.org/wiki/EDIFACT" rel="nofollow">EDIFACT</a> and <a href="http://en.wikipedia.org/wiki/TRADACOMS" rel="nofollow">TRADACOMS</a>.</p>

<p>If you aren't familiar with these standards then check out this example from Wikipedia:</p>

<blockquote>
  <p>See below for an example of an EDIFACT message used to answer to a
  product availability request:-</p>
</blockquote>

<pre><code>UNA:+.? '
UNB+IATB:1+6XPPC+LHPPC+940101:0950+1'
UNH+1+PAORES:93:1:IA'
MSG+1:45'
IFT+3+XYZCOMPANY AVAILABILITY'
ERC+A7V:1:AMD'
IFT+3+NO MORE FLIGHTS'
ODI'
TVL+240493:1000::1220+FRA+JFK+DL+400+C'
PDI++C:3+Y::3+F::1'
APD+714C:0:::6++++++6X'
TVL+240493:1740::2030+JFK+MIA+DL+081+C'
PDI++C:4'
APD+EM2:0:130::6+++++++DA'
UNT+13+1'
UNZ+1+1'
</code></pre>

<p>The UNA segment is optional. If present, it specifies the special characters that are to be used to interpret the remainder of the message. There are six characters following UNA in this order:</p>

<ul>
<li>component data element separator (: in this sample)</li>
<li>data element separator (+ in this sample)</li>
<li>decimal notification (. in this sample)</li>
<li>release character (? in this sample)</li>
<li>reserved, must be a space</li>
<li>segment terminator (' in this sample)</li>
</ul>

<hr>

<p>As you can see it's just some data formatted in a special way waiting to be parsed (much like <strong>XML</strong> files).</p>

<p>Now my system is built on PHP and I was able to create parser using regular expressions for each segment, but the problem is not everybody implements the standard perfectly.</p>

<p>Some suppliers tend to ignore optional segments and fields entirely. Others may choose to send more data than others. That's why I was forced to create validators for segments and fields to test if the file was correct or not.</p>

<p>You can imagine the nightmare of regular expressions I'm having right now. In addition each supplier needs many modifications to the regular expressions that I tend to build a parser for each supplier.</p>

<hr>

<p><strong>Questions:</strong></p>

<p>1- Is this the best practice for parsing files (using regular expressions)?</p>

<p>2- Is there a better solution for parsing files (maybe there are ready made solution out there)? Will it be able to show what segment is missing or if the file is corrupted?</p>

<p>3- If I have to build my parser anyway what design pattern or methodology should I use?</p>

<p><strong>Notes:</strong></p>

<p>I read somewhere about yacc and ANTLR, but I don't know if they match my needs or not!</p>

    </div>
    <div class="post-taglist">
        <a href="/questions/tagged/web-development" class="post-tag" title="show questions tagged &#39;web-development&#39;" rel="tag">web-development</a> <a href="/questions/tagged/design" class="post-tag" title="show questions tagged &#39;design&#39;" rel="tag">design</a> <a href="/questions/tagged/php" class="post-tag" title="show questions tagged &#39;php&#39;" rel="tag">php</a> <a href="/questions/tagged/parsing" class="post-tag" title="show questions tagged &#39;parsing&#39;" rel="tag">parsing</a> <a href="/questions/tagged/parser" class="post-tag" title="show questions tagged &#39;parser&#39;" rel="tag">parser</a> 
    </div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/q/147583" title="short permalink to this question" class="short-link" id="link-post-147583">share</a><span class="lsep">|</span><a href="/posts/147583/edit" class="suggest-edit-post" title="">improve this question</a></div>        
    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/147583/revisions" title="show all edits to this post">edited <span title="2012-05-09 14:17:20Z" class="relativetime">May 9 '12 at 14:17</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
    <td class="post-signature owner">
        
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            asked <span title="2012-05-07 11:40:11Z" class="relativetime">May 7 '12 at 11:40</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/50440/songo"><div><img src="https://www.gravatar.com/avatar/700bea4295fc7a286a08821a034e12d0?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/50440/songo">Songo</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,614</span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="29 bronze badges"><span class="badge3"></span><span class="badgecount">29</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</div>
</td>
        </tr>
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-147583" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="" 
			           data-addlink-disabled="true">

    <tr id="comment-279612" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">After seeing this <a href="http://stackoverflow.com/a/9209051/1243762">EDIFACT grammar, parsers and libraries (Java)</a> I wonder if using a lexer/parser would work. If it were me I would try the parser combinator first. :)</span>
	&ndash;&nbsp;
		<a href="/users/49838/guy-coder" 
		   title="571 reputation" 
		   class="comment-user">Guy Coder</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-08 20:28:16Z" class="relativetime-clean">May 8 '12 at 20:28</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-147583" 
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments."></a>
    </td>
</tr>            </table>    
</div>


			<div id="answers">

				<a name="tab-top"></a>
				<div id="answers-header">
					<div class="subheader answers-subheader">
						<h2>
								6 Answers
						</h2>
						<div>
							<div id="tabs">
        <a href="/questions/147583/best-way-to-parse-a-file?answertab=active#tab-top" title="Answers with the latest activity first">active</a>
        <a href="/questions/147583/best-way-to-parse-a-file?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a>
        <a class="youarehere" href="/questions/147583/best-way-to-parse-a-file?answertab=votes#tab-top" title="Answers with the highest score first">votes</a>
</div>
						</div>
					</div>    
				</div>    




  
<a name="147589"></a>
<div id="answer-147589" class="answer accepted-answer" data-answerid="147589" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="147589">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">16</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


        <span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted...">accepted</span>
</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>What you need is a true parser. Regular expressions handle lexing, not parsing. That is, they identify tokens within your input stream. Parsing is the context of the tokens, I.E. who goes where and in what order.</p>

<p>The classic parsing tool is <a href="http://www.gnu.org/software/bison/manual/html_node/index.html#Top">yacc/bison</a>. The classic lexer is <a href="http://flex.sourceforge.net/manual/index.html#Top">lex/flex</a>. Since php allows for <a href="http://stackoverflow.com/a/706980/724357">integrating C code</a>, you can use flex and bison to build your parser, have php call it on the input file/stream, and then get your results.</p>

<p>It will be <a href="http://swtch.com/~rsc/regexp/regexp1.html">blazing fast</a>, and far easier to work with <em>once you understand the tools</em>. I suggest reading <a href="http://shop.oreilly.com/product/9781565920002.do">Lex and Yacc 2nd Ed.</a> from O'Reilly. For an example, I've set up a <a href="https://github.com/srathbun/example-parser">flex and bison project on github</a>, with a makefile. It is cross compilable for windows if necessary.</p>

<p>It <em>is</em> complex, but as you found out, what you need done is complex. There is a great deal of "stuff" that must be done for a properly working parser, and flex and bison deal with the mechanical bits. Otherwise, you find yourself in the unenviable position of writing code at the same abstraction layer as assembly. </p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/147589" title="short permalink to this answer" class="short-link" id="link-post-147589">share</a><span class="lsep">|</span><a href="/posts/147589/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2012-05-07 13:02:34Z" class="relativetime">May 7 '12 at 13:02</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/27114/spencer-rathbun"><div><img src="https://www.gravatar.com/avatar/560e7baed307950747f2ff0ca2b1a13a?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/27114/spencer-rathbun">Spencer Rathbun</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">2,899</span><span title="6 silver badges"><span class="badge2"></span><span class="badgecount">6</span></span><span title="23 bronze badges"><span class="badge3"></span><span class="badgecount">23</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-147589" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="3" 
			           data-addlink-html="" 
			           data-addlink-disabled="true">

    <tr id="comment-279126" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">+1 Great answer, especially considering that it comes with a sample parser.</span>
	&ndash;&nbsp;
		<a href="/users/20011/caleb" 
		   title="29359 reputation" 
		   class="comment-user">Caleb</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 13:08:34Z" class="relativetime-clean">May 7 '12 at 13:08</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279127" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@caleb thanks, I work with flex/bison a lot, but there are very few decent(read: complex) examples. This isn&#39;t the best parser ever, since there aren&#39;t many comments, so feel free to send in updates.</span>
	&ndash;&nbsp;
		<a href="/users/27114/spencer-rathbun" 
		   title="2899 reputation" 
		   class="comment-user">Spencer Rathbun</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 13:11:04Z" class="relativetime-clean">May 7 '12 at 13:11</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279132" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@SpencerRathbun thanks very much for your detailed answer and example. I have no knowledge what so ever about any of the terminology you mentioned (yacc/bison, lex/flex,...etc.) as I my experience is mainly about web development. Is <i>&quot;Lex and Yacc 2nd Ed&quot;</i> sufficient for me to understand everything and build a good parser? or is there other topics and materials that I should cover first?</span>
	&ndash;&nbsp;
		<a href="/users/50440/songo" 
		   title="1614 reputation" 
		   class="comment-user owner">Songo</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 13:23:33Z" class="relativetime-clean">May 7 '12 at 13:23</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279141" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@songo The book does cover all the relevant details and is quite short, clocking in at ~300 mid sized pages. It does not cover using c, or <i>language design</i>. Luckily, there are lots of c references available, such as <a href="http://cm.bell-labs.com/cm/cs/cbook/" rel="nofollow">K&amp;R The C Programming Language</a> and you don&#39;t need to design a language, just follow the standards you have referenced. Please note that reading cover to cover is recommended, since the authors will mention something once, and assume if you need it you will go back and reread. That way you don&#39;t miss anything.</span>
	&ndash;&nbsp;
		<a href="/users/27114/spencer-rathbun" 
		   title="2899 reputation" 
		   class="comment-user">Spencer Rathbun</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 13:56:24Z" class="relativetime-clean">May 7 '12 at 13:56</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279147" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">I don&#39;t think a standard lexer can handle dynamic separators, which the UNA line may specify. So at the least you&#39;ll need a lexer with runtime-customizable characters for the 5 separators.</span>
	&ndash;&nbsp;
		<a href="/users/39822/kevin" 
		   title="153 reputation" 
		   class="comment-user">Kevin</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 14:18:26Z" class="relativetime-clean">May 7 '12 at 14:18</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-147589" 
			   class="comments-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”.">show <b>3</b> more comments</a>
    </td>
</tr>
    </table>
</div>

  
<a name="147593"></a>
<div id="answer-147593" class="answer" data-answerid="147593" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="147593">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">3</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>ouch.. 'true' parser? state machines?? </p>

<p>sorry but i've been converted from academic to hacker since I began my employment.. so I would say there are easier ways.. although maybe not as 'refined' academically :)</p>

<p>I will try to offer an alternative approach which some may or may not agree with but it CAN be very practical in a work environment.</p>

<p>I would;</p>

<pre><code>loop every line
   X = pop the first 3 letters of line
   Y = rest of line
   case X = 'UNA':
       class init (Y)
</code></pre>

<p>from there i would use classes for the data types. splitting component and element separators and iterate over the returned arrays.</p>

<p>For me, this is code re-use, OO, low cohesion and highly modular.. and easy to debug and program. simpler is better.</p>

<p>to parse a file you don't need state machines or anything entirely complicated.. state machines are well suited to parse code, you'll be suprised at how powerfull the above pseduo code can be when used in an OO context.</p>

<p>ps. i've worked with very similar files before :)</p>

<hr>

<p>More pseudo code posted here:</p>

<p>class </p>

<pre><code>UNA:

init(Y):
 remove ' from end
 components = Y.split(':') 
 for c in components
     .. etc..

 getComponents():
   logic..
   return

 getSomethingElse():
   logic..
   return

class UNZ:
   ...

Parser(lines):

Msg = new obj;

for line in lines
   X = pop the first 3 letters of line
   Y = rest of line
   case X = 'UNA':
      Msg.add(UNA(Y))

msg.isOK = true
return Msg
</code></pre>

<p>you could then use it like this..</p>

<pre><code>msg = Main(File.getLines());
// could put in error checking
// if msg.isOK:
msg.UNA.getSomethingElse();
</code></pre>

<p>and say you have more than one segment.. use a queue to add them and get the first, second etc.. as you need. You are really just representing the msg into an obj and giving the object methods to call the data. you could take advantage of this by also creating custom methods.. for inheritance.. well that's a different question and i think you could easily apply it if you understand it</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/147593" title="short permalink to this answer" class="short-link" id="link-post-147593">share</a><span class="lsep">|</span><a href="/posts/147593/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/147593/revisions" title="show all edits to this post">edited <span title="2012-05-08 05:44:38Z" class="relativetime">May 8 '12 at 5:44</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2012-05-07 13:47:16Z" class="relativetime">May 7 '12 at 13:47</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/10442/ross"><div><img src="https://www.gravatar.com/avatar/5e1cb5c92325319e6c3fe66872fc4708?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/10442/ross">Ross</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">594</span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="9 bronze badges"><span class="badge3"></span><span class="badgecount">9</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-147593" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="2" 
			           data-addlink-html="" 
			           data-addlink-disabled="true">

    <tr id="comment-279143" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">3</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">I&#39;ve done that before, and found it is insufficient for anything beyond one or two cases of <code>recognize X token and do Y</code>. There is no context, you cannot have multiple states, moving past a trivial number of cases bloats the code, and error handling is difficult. I find that I have needed these features in the real world in almost all cases. That leaves aside mistakes in it as the complexity grows. The hardest part is setting up a skeleton, and learning how the tool operates. Get past that and it&#39;s just as fast to whip up something.</span>
	&ndash;&nbsp;
		<a href="/users/27114/spencer-rathbun" 
		   title="2899 reputation" 
		   class="comment-user">Spencer Rathbun</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 14:04:03Z" class="relativetime-clean">May 7 '12 at 14:04</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279145" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">it is a message, what states do you need? it would seem that such a message, which is organised in a structure of composites and segments would fit this OO approach perfectly. error handling is done per class and done properly you can construct a parser that is very efficient and extensible. messages such as this lend themselves to classes and functions especially when multiple vendors send different flavours of the same format. An example would be a function in a UNA class which returned a particular value for a specific vendor.</span>
	&ndash;&nbsp;
		<a href="/users/10442/ross" 
		   title="594 reputation" 
		   class="comment-user">Ross</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 14:12:52Z" class="relativetime-clean">May 7 '12 at 14:12</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279149" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Ross so basically you will have a <i>&quot;UNA class&quot;</i> for the segment <i>&quot;UNA&quot;</i> and inside it there will be a parse method for each vendor (<code>parseUNAsegemntForVendor1()</code>,<code>parseUNAsegemntForVendor2()</code>,<code>parseUNAsegemntFor&zwnj;&#8203;Vendor3()</code>,...etc), right ?</span>
	&ndash;&nbsp;
		<a href="/users/50440/songo" 
		   title="1614 reputation" 
		   class="comment-user owner">Songo</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 14:19:52Z" class="relativetime-clean">May 7 '12 at 14:19</span></span>
		<span class="edited-yes" title="this comment was edited 2 times"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279152" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">2</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Ross There are sections to the message, valid at different points during parsing. Those are the states I was talking about. The OO design is clever, and I&#39;m not saying it <i>won&#39;t work</i>. I push flex and bison because like functional programming concepts, they fit better than other tools, but most people believe they are too complicated to bother learning.</span>
	&ndash;&nbsp;
		<a href="/users/27114/spencer-rathbun" 
		   title="2899 reputation" 
		   class="comment-user">Spencer Rathbun</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 14:39:37Z" class="relativetime-clean">May 7 '12 at 14:39</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-279153" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Songo.. nope, you would parse independently of the vendor (unless you new who). the parse would be in the INIT of the class. You turn your message into a data object based on the same rules used to construct the message. If you needed to grab something from the message however.. and it is represented differently across your vendors then you would have the different functions yep.. But why do it like that? use a base class and have a separate class for each vendor, overriding only when necessary, much easier. take advantage of inheritance.</span>
	&ndash;&nbsp;
		<a href="/users/10442/ross" 
		   title="594 reputation" 
		   class="comment-user">Ross</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 14:39:45Z" class="relativetime-clean">May 7 '12 at 14:39</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-147593" 
			   class="comments-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”.">show <b>2</b> more comments</a>
    </td>
</tr>
    </table>
</div>

  
<a name="147728"></a>
<div id="answer-147728" class="answer" data-answerid="147728" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="147728">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>Have you tried googling for "PHP EDIFACT"? This is one of the first results that popped up: <a href="http://code.google.com/p/edieasy/" rel="nofollow">http://code.google.com/p/edieasy/</a></p>

<p>While it may not be sufficient for your use case, you may be able to get some ideas from it. I don't like the code with its many nested for loops and conditions, but it may be a start.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/147728" title="short permalink to this answer" class="short-link" id="link-post-147728">share</a><span class="lsep">|</span><a href="/posts/147728/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2012-05-08 09:13:00Z" class="relativetime">May 8 '12 at 9:13</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/31126/chiborg"><div><img src="https://www.gravatar.com/avatar/ef5ab33bba8dd9ca281e42c7a1642113?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/31126/chiborg">chiborg</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">141</span><span title="1 silver badge"><span class="badge2"></span><span class="badgecount">1</span></span><span title="4 bronze badges"><span class="badge3"></span><span class="badgecount">4</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-147728" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="" 
			           data-addlink-disabled="true">

    <tr id="comment-279429" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">I checked many projects out there, but the problem was mainly in the different implementations of the vendors using the standard. I might force one vendor to send me a certain segment, but I may consider it optional for another vendor. That&#39;s why I probably gonna need to build my own customized parser anyway.</span>
	&ndash;&nbsp;
		<a href="/users/50440/songo" 
		   title="1614 reputation" 
		   class="comment-user owner">Songo</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-08 09:20:43Z" class="relativetime-clean">May 8 '12 at 9:20</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-147728" 
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></a>
    </td>
</tr>
    </table>
</div>

  
<a name="147745"></a>
<div id="answer-147745" class="answer" data-answerid="147745" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="147745">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>Well since Yacc/Bison+Flex/Lex got mentioned, I might as well throw in one of the other major alternatives: parser combinators.  These are popular in functional programming like with Haskell, but if you can interface to C code you can use them and, what do you know, <a href="http://qntm.org/loco" rel="nofollow">somebody wrote one for PHP too.</a>  (I have no experience with that particular implementation, but if it works like most of them, it should be pretty nice.)</p>

<p>The general concept is that you start with a set of small, easy to define parsers, usually tokenizers.  Like you'd have one parser function for each of the 6 data elements you mentioned.  Then you use combinators (functions that combine functions) to make larger parsers that grab larger elements.  Like an optional segment would be the <code>optional</code> combinator operating on the segment parser.</p>

<p>Not sure how well it works in PHP, but it's a fun way to write a parser and I very much enjoy using them in other languages.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/147745" title="short permalink to this answer" class="short-link" id="link-post-147745">share</a><span class="lsep">|</span><a href="/posts/147745/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2012-05-08 13:22:35Z" class="relativetime">May 8 '12 at 13:22</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/5109/codexarcanum"><div><img src="https://www.gravatar.com/avatar/ff1b01be2f2658a5fbd17b9d6e43249d?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/5109/codexarcanum">CodexArcanum</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">2,447</span><span title="8 silver badges"><span class="badge2"></span><span class="badgecount">8</span></span><span title="17 bronze badges"><span class="badge3"></span><span class="badgecount">17</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-147745" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="" 
			           data-addlink-disabled="true">

    <tr id="comment-279487" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Thanks for the link I&#39;ll look into it :)</span>
	&ndash;&nbsp;
		<a href="/users/50440/songo" 
		   title="1614 reputation" 
		   class="comment-user owner">Songo</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-08 14:11:30Z" class="relativetime-clean">May 8 '12 at 14:11</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-147745" 
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></a>
    </td>
</tr>
    </table>
</div>

  
<a name="147591"></a>
<div id="answer-147591" class="answer" data-answerid="147591" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="147591">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">0</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>instead of fiddling with regexes make your own state machine </p>

<p>this will be more readable (and be able to have better comments) in non-trivial situations and will be easier to debug that the black box that is regex </p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/147591" title="short permalink to this answer" class="short-link" id="link-post-147591">share</a><span class="lsep">|</span><a href="/posts/147591/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2012-05-07 13:14:04Z" class="relativetime">May 7 '12 at 13:14</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/25768/ratchet-freak"><div><img src="https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/25768/ratchet-freak">ratchet freak</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">8,679</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="16 silver badges"><span class="badge2"></span><span class="badgecount">16</span></span><span title="34 bronze badges"><span class="badge3"></span><span class="badgecount">34</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-147591" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="" 
			           data-addlink-disabled="true">

    <tr id="comment-279131" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="warm">5</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">A quick note, this is what flex and bison do under the hood. Only they do it <i>right</i>.</span>
	&ndash;&nbsp;
		<a href="/users/27114/spencer-rathbun" 
		   title="2899 reputation" 
		   class="comment-user">Spencer Rathbun</a>
	<span class="comment-date" dir="ltr"><span title="2012-05-07 13:21:16Z" class="relativetime-clean">May 7 '12 at 13:21</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-147591" 
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></a>
    </td>
</tr>
    </table>
</div>

  
<a name="147922"></a>
<div id="answer-147922" class="answer" data-answerid="147922" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="147922">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">0</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>I don't know what you want to exactly do with this data afterwards and if it is not a sledgehammer for a nut, but i had good experiences with <a href="http://eli-project.sourceforge.net/elionline/index.html" rel="nofollow">eli</a>. You describe the lexical phrases and then concrete/abstract syntax and generate what you want to generate. </p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/147922" title="short permalink to this answer" class="short-link" id="link-post-147922">share</a><span class="lsep">|</span><a href="/posts/147922/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2012-05-09 16:34:40Z" class="relativetime">May 9 '12 at 16:34</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/44014/sebastian-bauer"><div><img src="https://www.gravatar.com/avatar/3a514f73a77f59783a9c205f3cd8a0da?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/44014/sebastian-bauer">Sebastian Bauer</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">121</span><span title="4 bronze badges"><span class="badge3"></span><span class="badgecount">4</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-147922" class="comments dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="" 
			           data-addlink-disabled="true">
					    <tr><td></td><td></td></tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-147922" 
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></a>
    </td>
</tr>
    </table>
</div>
									<a name='new-answer'></a>
						<form id="post-form" action="/questions/147583/answer/submit" method="post"  class="post-form">
							<input type="hidden" id="post-id" value="147583" />
							<h2 class="space">Your Answer</h2>



    

<script type="text/javascript">
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });
        

    });  
</script>


<div id="post-editor" class="post-editor">

    <div style="position: relative;">     
        <div class="wmd-container">
            <div id="wmd-button-bar" class="wmd-button-bar"></div>
            <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101" data-min-length=""></textarea>
        </div>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>



    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="f51c005c36aeb04be7163e16a81b52d5">
        <input id="author" name="author" type="text">
    </div>
</div>
							<div style="position: relative;">
								
            <div class="form-item dno new-post-login">
        
                <div class="new-login-form">
                    <div class="new-login-left">
                        <h3>Sign up or <a id="login-link" href="/users/login?returnurl=%2fquestions%2f147583%2fbest-way-to-parse-a-file%23new-answer">login</a></h3>
                        <script type="text/javascript">
                            StackExchange.ready(function () {
                                StackExchange.helpers.onClickDraftSave('#login-link');
                            });
                        </script>
                        <div class="preferred-login google-login">
                            <p><span class="icon"></span><span>Sign up using Google</span></p>
                        </div>
                        <div class="preferred-login facebook-login">
                            <p><span class="icon"></span><span>Sign up using Facebook</span></p>
                        </div>
                        <div class="preferred-login stackexchange-login">
                            <p><span class="icon"></span><span>Sign up using Stack Exchange</span></p>
                        </div>
                    </div>
                    <input type="hidden" name="manual-openid" class="manual-openid" />
                    <input type="hidden" name="use-facebook" class="use-facebook" value="false" />
                    <input type="button" class="submit-openid" value="Submit" style="display:none" />
                    <div class="new-login-right">
                                <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

                    </div>
                </div>
            </div>
            <script type="text/javascript">
                StackExchange.ready(
                    function () {
                        StackExchange.openid.initPostLogin('.new-post-login', '%2fquestions%2f147583%2fbest-way-to-parse-a-file%23new-answer');
                    }
                );
            </script>
            <noscript>
                        <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

            </noscript>
							</div>
           
															<div class="form-submit cbt">
									<input id="submit-button" type="submit" value="Post Your Answer" tabindex="110">
									<a href="#" class="discard-answer dno">discard</a>

<p class="privacy-policy-agreement">
By posting your answer, you agree to the <a href='http://stackexchange.com/legal/privacy-policy' target='_blank'>privacy policy</a> and <a href='http://stackexchange.com/legal/terms-of-service' target='_blank'>terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1" />								</div>
						</form>



						<h2 class="bottom-notice">
Not the answer you&#39;re looking for?							Browse other questions tagged <a href="/questions/tagged/web-development" class="post-tag" title="show questions tagged &#39;web-development&#39;" rel="tag">web-development</a> <a href="/questions/tagged/design" class="post-tag" title="show questions tagged &#39;design&#39;" rel="tag">design</a> <a href="/questions/tagged/php" class="post-tag" title="show questions tagged &#39;php&#39;" rel="tag">php</a> <a href="/questions/tagged/parsing" class="post-tag" title="show questions tagged &#39;parsing&#39;" rel="tag">parsing</a> <a href="/questions/tagged/parser" class="post-tag" title="show questions tagged &#39;parser&#39;" rel="tag">parser</a>  or <a href="/questions/ask">ask your own question</a>.						</h2>
			</div>
		</div>
				<div id="sidebar" class="show-votes">
							<div class="module question-stats">
					<p class="label-key">tagged</p>
					<div class="tagged"><a href="/questions/tagged/design" class="post-tag" title="show questions tagged &#39;design&#39;" rel="tag">design</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">1327</span></span><br>
<a href="/questions/tagged/php" class="post-tag" title="show questions tagged &#39;php&#39;" rel="tag">php</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">1073</span></span><br>
<a href="/questions/tagged/web-development" class="post-tag" title="show questions tagged &#39;web-development&#39;" rel="tag">web-development</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">1073</span></span><br>
<a href="/questions/tagged/parsing" class="post-tag" title="show questions tagged &#39;parsing&#39;" rel="tag">parsing</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">73</span></span><br>
<a href="/questions/tagged/parser" class="post-tag" title="show questions tagged &#39;parser&#39;" rel="tag">parser</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">38</span></span><br>
</div>
					<table id="qinfo">
						<tr>
							<td>
								<p class="label-key">asked</p>
							</td>
							<td style="padding-left: 10px">
								<p class="label-key" title="2012-05-07 11:40:11Z"><b>1 year ago</b></p>
							</td>
						</tr>
						<tr>
							<td>
								<p class="label-key">viewed</p>
							</td>

							<td style="padding-left: 10px">
								<p class="label-key">
									<b>1104 times</b>
								</p>
							</td>
						</tr>
							<tr>
								<td>
									<p class="label-key">active</p>
								</td>
								<td style="padding-left: 10px">
									<p class="label-key"><b><a href="?lastactivity" class="lastactivity-link" title="2012-05-09 16:34:40Z">1 year ago</a></b></p>
								</td>
							</tr>
					</table>
				</div>
						
			

<style type="text/css">
    .ads { margin-left: 60px; }
    .ad-container { width: 220px; height: 250px; margin-right: 20px; margin-bottom: 20px; }
    .ad-container .ad { height: 250px; }
    .ad-container .footer-container { overflow: hidden; height: 30px; position: relative; top: -30px; }
    .ad-container .footer-container .footer { font-family: Arial,Helvetic,Sans-Serif; font-size: 12px; text-align: center; padding-top: 9px; background-color: #000; color: #EFF; opacity: 0.9; filter: alpha(opacity=90); top: 30px; height: 30px; position: relative; }
    .ad-container a:hover { text-decoration: underline; }
    #adzerk2 { height: 250px; }
</style>
<script type="text/javascript">
    StackExchange.ready(function () {
        $(".ad-container").hover(
            function () {
                $(".ad-container .footer-container .footer").stop(true, true).animate({ top: "0px" }, "fast");
            },
            function () {
                $(".ad-container .footer-container .footer").animate({ top: "30px" }, "fast");
            });
    });
</script>
    <script type="text/javascript">
        var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = 'http://engine.adzerk.net/z/12057/adzerk2_2_17_76?keywords=x-host-programmers.stackexchange.com'; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);
    </script>
    <div class="everyonelovesstackoverflow" id="adzerk2">
    </div>  

    <div style="margin-bottom: 10px;">
        

<style type="text/css">
#newsletter-ad {
    width: 190px;
    height: 250px;
    overflow: hidden;
    background: url('//cdn.sstatic.net/programmers/img/newsletter-ad.png');
    padding: 0 15px 0 15px;
}
#newsletter-ad-header {
    margin-top: 60px;
}
#newsletter-ad ul {
    margin: 1em 0 1em 1.5em;
}
#newsletter-ad ul li {
    margin-bottom: 5px;
}
#newsletter-signup-container {
    text-align: center;
}
#newsletter-preview-container {
    margin-top: 10px;
    text-align: center;
}
#newsletter-email-input {
    width: 200px;
}
</style>

<script>
    StackExchange.ready(function () {
        StackExchange.newsletterAd.init();
    });
</script>

<div id="newsletter-ad">
    <p id="newsletter-ad-header">Get the <b>weekly newsletter!</b></p>
    <ul>
        <li>Top questions and answers</li>
        <li>Important announcements</li>
        <li>Unanswered questions</li>
    </ul>
    <div id="newsletter-signup-container"><input id="newsletter-signup" type="button" value="Sign up for the newsletter" /></div>
    <p id="newsletter-preview-container">see an <a href="http://stackexchange.com/newsletters/newsletter?site=programmers.stackexchange.com" id="newsletter-preview">example newsletter</a></p>
    <div class="dno">
        
<p class="privacy-policy-agreement">
By subscribing, you agree to the <a href='http://stackexchange.com/legal/privacy-policy' target='_blank'>privacy policy</a> and <a href='http://stackexchange.com/legal/terms-of-service' target='_blank'>terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1" />
    </div>
</div>

    </div>

			  
    
            

				<div class="module sidebar-related">
					<h4 id="h-related">Related</h4>
					<div class="related" data-tracker="rq=1">
						<div class="spacer">
<a href="/q/68035" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">2
    </div>
</a><a href="/questions/68035/what-is-the-best-way-to-store-files-when-using-winforms-and-web" class="question-hyperlink">What is the best way to store files when using winforms and web?</a>
</div>
<div class="spacer">
<a href="/q/114615" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">6
    </div>
</a><a href="/questions/114615/c-xml-parsing-suggestions-on-approach-for-parsing-and-storing-data" class="question-hyperlink">C++ XML Parsing: Suggestions on Approach for Parsing and Storing data</a>
</div>
<div class="spacer">
<a href="/q/117161" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">2
    </div>
</a><a href="/questions/117161/best-way-to-parse-optional-grammar-rules" class="question-hyperlink">Best way to parse optional grammar rules?</a>
</div>
<div class="spacer">
<a href="/q/125710" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">22
    </div>
</a><a href="/questions/125710/what-are-the-arguments-against-parsing-the-cthulhu-way" class="question-hyperlink">What are the arguments against parsing the Cthulhu way?</a>
</div>
<div class="spacer">
<a href="/q/156446" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">7
    </div>
</a><a href="/questions/156446/parsing-multiple-file-formats-protocols" class="question-hyperlink">Parsing multiple file formats/protocols</a>
</div>
<div class="spacer">
<a href="/q/156656" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">0
    </div>
</a><a href="/questions/156656/picture-parsing" class="question-hyperlink">Picture Parsing</a>
</div>
<div class="spacer">
<a href="/q/178773" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">3
    </div>
</a><a href="/questions/178773/help-parsing-long-3-5mil-lines-text-file-line-by-line-and-storing-data-need" class="question-hyperlink">Help parsing long (3.5mil lines) text file, line by line and storing data, need a strategy</a>
</div>
<div class="spacer">
<a href="/q/189422" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">2
    </div>
</a><a href="/questions/189422/is-theres-a-way-to-speed-up-my-php-code-which-parse-xml-files" class="question-hyperlink">Is there&#39;s a way to speed up my php code which parse XML files</a>
</div>
<div class="spacer">
<a href="/q/204572" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">1
    </div>
</a><a href="/questions/204572/php-simplest-xml-tokenizer-for-string-processing" class="question-hyperlink">PHP Simplest XML tokenizer for string processing?</a>
</div>
<div class="spacer">
<a href="/q/207478" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">-3
    </div>
</a><a href="/questions/207478/best-object-oriented-way-of-parsing-a-model-with-several-fields50-and-with-nu" class="question-hyperlink">Best Object Oriented way of parsing a model with several fields(&gt;50) and with null checks</a>
</div>

					</div>
				</div>
		</div>
	
<div id="feed-link">
    <div id="feed-link-text"><a href="/feeds/question/147583" title="feed of this question and its answers"><span class="feed-icon"></span>question feed</a></div>
</div>
	<script type="text/javascript">
StackExchange.ready(function(){$.get('/posts/147583/ivc/bf9e');});
</script>
<noscript>
    <div><img src="/posts/147583/ivc/bf9e" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang">lang-php</div></div>


        </div>
    </div>
    <div id="footer" class="categories">
        <div class="footerwrap">
            <div id="footer-menu">
                <div class="top-footer-links">
                        <a href="/about">about</a>
                    <a href="/help">help</a>
                        <a href="/help/badges">badges</a>
                    <a href="http://programmers.blogoverflow.com?blb=1">blog</a>
                        <a href="http://chat.stackexchange.com">chat</a>
                    <a href="http://data.stackexchange.com">data</a>
                    <a href="http://stackexchange.com/legal">legal</a>
                    <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a>
                    <a href="http://stackexchange.com/about/hiring">jobs</a>
                    <a href="http://stackexchange.com/about/contact">advertising info</a>

                    <a onclick='StackExchange.switchMobile("on", "/questions/147583/best-way-to-parse-a-file")'>mobile</a>
                    <b><a href="/contact">contact us</a></b>
                        <b><a href="http://meta.programmers.stackexchange.com">feedback</a></b>
                    
                </div>
                <div id="footer-sites">
                    <table>
    <tr>
            <th colspan=3>
                Technology
            </th>
            <th >
                Life / Arts
            </th>
            <th >
                Culture / Recreation
            </th>
            <th >
                Science
            </th>
            <th >
                Other
            </th>
    </tr>
    <tr>
            <td>
                <ol>
                        <li><a href="http://stackoverflow.com" title="professional and enthusiast programmers">Stack Overflow</a></li>
                        <li><a href="http://serverfault.com" title="professional system and network administrators">Server Fault</a></li>
                        <li><a href="http://superuser.com" title="computer enthusiasts and power users">Super User</a></li>
                        <li><a href="http://webapps.stackexchange.com" title="power users of web applications">Web Applications</a></li>
                        <li><a href="http://askubuntu.com" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                        <li><a href="http://webmasters.stackexchange.com" title="pro webmasters">Webmasters</a></li>
                        <li><a href="http://gamedev.stackexchange.com" title="professional and independent game developers">Game Development</a></li>
                        <li><a href="http://tex.stackexchange.com" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://programmers.stackexchange.com" title="professional programmers interested in conceptual questions about software development">Programmers</a></li>
                        <li><a href="http://unix.stackexchange.com" title="users of Linux, FreeBSD and other Un*x-like operating systems.">Unix &amp; Linux</a></li>
                        <li><a href="http://apple.stackexchange.com" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                        <li><a href="http://wordpress.stackexchange.com" title="WordPress developers and administrators">WordPress Answers</a></li>
                        <li><a href="http://gis.stackexchange.com" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                        <li><a href="http://electronics.stackexchange.com" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                        <li><a href="http://android.stackexchange.com" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                        <li><a href="http://security.stackexchange.com" title="Information security professionals">Information Security</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://dba.stackexchange.com" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                        <li><a href="http://drupal.stackexchange.com" title="Drupal developers and administrators">Drupal Answers</a></li>
                        <li><a href="http://sharepoint.stackexchange.com" title="SharePoint enthusiasts">SharePoint</a></li>
                        <li><a href="http://ux.stackexchange.com" title="user experience researchers and experts">User Experience</a></li>
                        <li><a href="http://mathematica.stackexchange.com" title="users of Mathematica">Mathematica</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#technology" class="more">
                                more (14)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://photo.stackexchange.com" title="professional, enthusiast and amateur photographers">Photography</a></li>
                        <li><a href="http://scifi.stackexchange.com" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                        <li><a href="http://cooking.stackexchange.com" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                        <li><a href="http://diy.stackexchange.com" title="contractors and serious DIYers">Home Improvement</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#lifearts" class="more">
                                more (13)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://english.stackexchange.com" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                        <li><a href="http://skeptics.stackexchange.com" title="scientific skepticism">Skeptics</a></li>
                        <li><a href="http://judaism.stackexchange.com" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                        <li><a href="http://travel.stackexchange.com" title="road warriors and seasoned travelers">Travel</a></li>
                        <li><a href="http://christianity.stackexchange.com" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                        <li><a href="http://gaming.stackexchange.com" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                        <li><a href="http://bicycles.stackexchange.com" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                        <li><a href="http://rpg.stackexchange.com" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#culturerecreation" class="more">
                                more (21)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://math.stackexchange.com" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                        <li><a href="http://stats.stackexchange.com" title="statisticians, data analysts, data miners and data visualization experts">Cross Validated (stats)</a></li>
                        <li><a href="http://cstheory.stackexchange.com" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                        <li><a href="http://physics.stackexchange.com" title="active researchers, academics and students of physics">Physics</a></li>
                        <li><a href="http://mathoverflow.net" title="professional mathematicians">MathOverflow</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#science" class="more">
                                more (7)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://stackapps.com" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                        <li><a href="http://meta.stackoverflow.com" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Overflow</a></li>
                        <li><a href="http://area51.stackexchange.com" title="proposing new sites in the Stack Exchange network">Area 51</a></li>
                        <li><a href="http://careers.stackoverflow.com">Stack Overflow Careers</a></li>
                    
                </ol>
            </td>
    </tr>
</table>
                </div>
            </div>

            <div id="copyright">
                site design / logo &#169; 2013 stack exchange inc; user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc-wiki</a> 
 with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            <div id="footer-flair">
                <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="cc-wiki-link"></a>
            </div>
            <div id="svnrev">
                rev 2013.11.22.1174
            </div>
            
        </div>
    </div>
    <noscript>
        <div id="noscript-warning">Programmers Stack Exchange works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript>

    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-24']);
        _gaq.push(['_setDomainName','.stackexchange.com']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|web-development|design|php|parsing|parser|']); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    var _comscore = _comscore || [];
    (function () {
        var ssl='https:'==document.location.protocol,
            s=document.getElementsByTagName('script')[0],
            ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src=(ssl?'https://ssl':'http://www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src=(ssl?'https://secure':'http://edge')+'.quantserve.com/quant.js';
        s.parentNode.insertBefore(sc, s);
        
        var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
        s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
        el.parentNode.insertBefore(s, el);
        
    })();
    _comscore.push({ c1: "2", c2: "17440561" });
    _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script>        
    
</body>
</html>
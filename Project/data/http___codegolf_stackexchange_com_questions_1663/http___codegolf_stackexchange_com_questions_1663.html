<!DOCTYPE html>
<html>
<head>
    
    <title>code challenge - Shuffle a deck without local variables - Programming Puzzles & Code Golf Stack Exchange</title>
    <link rel="shortcut icon" href="//cdn.sstatic.net/codegolf/img/favicon.ico">
    <link rel="apple-touch-icon image_src" href="//cdn.sstatic.net/codegolf/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Programming Puzzles &amp; Code Golf Stack Exchange" href="/opensearch.xml">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@StackCodeGolf" />
    <meta name="twitter:domain" content="codegolf.stackexchange.com"/>
    <meta name="og:type" content="website" />
    <meta name="og:image" content="http://cdn.sstatic.net/codegolf/img/apple-touch-icon.png?v=6f55f0b2476f"/>
    <meta name="og:title" content="Shuffle a deck without local variables" />
    <meta name="og:description" content="The object of this puzzle is to take a deck of 52 cards and shuffle it so that each card is in a random position.

Given (i.e. assumed to exist already):


A length-52 array of integers representin..." />
    <meta name="og:url" content="http://codegolf.stackexchange.com/questions/1663/shuffle-a-deck-without-local-variables"/>
    <link rel="canonical" href="http://codegolf.stackexchange.com/questions/1663/shuffle-a-deck-without-local-variables" />

    
    
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//cdn.sstatic.net/Js/stub.en.js?v=e3d47b73fa12" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.sstatic.net/codegolf/all.css?v=a1dd281cae8a">
    
    <link rel="alternate" type="application/atom+xml" title="Feed for question &#39;Shuffle a deck without local variables&#39;" href="/feeds/question/1663">
    <script type="text/javascript">
        
        StackExchange.ready(function () {
            StackExchange.using("postValidation", function () {
                StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
            });

            
            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:16,shownCommentCount:5,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:1663});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('200', '1663');
            
                    });
    </script>


    <script type="text/javascript">
        StackExchange.ready(function () {
            StackExchange.realtime.init('wss://qa.sockets.stackexchange.com,ws://qa.sockets.stackexchange.com');
            StackExchange.realtime.subscribeToInboxNotifications();
                    StackExchange.realtime.subscribeToReputationNotifications('200');
                        });
    </script>
    <script type="text/javascript">
        StackExchange.init({"locale":"en","stackAuthUrl":"https://stackauth.com","serverTime":1385455267,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Programming Puzzles & Code Golf Stack Exchange","description":"Q&A for programming puzzle enthusiasts and code golfers","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdsB7sSAAAAAAzjgEF_Hd8vXv-C42sa_KyofaGR","enableSocialMediaInSharePopup":true},"user":{"fkey":"f51c005c36aeb04be7163e16a81b52d5","isAnonymous":true}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.en.js":"e0bbd4760e83","js/moderator.en.js":"1a411fd265fe","js/full-anon.en.js":"8a881a0975af","js/full.en.js":"e87912181c10","js/wmd.en.js":"bd9234d44a40","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/third-party/jquery.autocomplete.min.en.js":"","js/mobile.en.js":"d1d834ef85d2","js/help.en.js":"d3cc74d8a93a","js/tageditor.en.js":"6d51a5f8d7f3","js/tageditornew.en.js":"111b781cf314","js/inline-tag-editing.en.js":"f951bd09dc69","js/revisions.en.js":"33fd38144303","js/review.en.js":"f45b4ec094ea","js/tagsuggestions.en.js":"e4e7b952fcc7","js/post-validation.en.js":"c275fe37d674","js/explore-qlist.en.js":"73825bd006fc","js/events.en.js":"53bc48767091"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
        
    </script>
    
        <script type="text/javascript">
            StackExchange.ready(function () {
                $('#nav-tour').click(function () {
                    StackExchange.using("gps", function() {
                        StackExchange.gps.track("aboutpage.click", { aboutclick_location: "headermain" }, true);
                    });
                });
            });
        </script>
</head>
<body class="question-page">
    <noscript><div id="noscript-padding"></div></noscript>
    <div id="notify-container"></div>
    <div id="overlay-header"></div>
    <div id="custom-header"></div>
    <div class="container">
        <div id="header" class=headeranon>
            <div id="portalLink">
                <a class="genu" href="http://stackexchange.com" onclick="StackExchange.ready(function(){genuwine.click();});return false;">Stack Exchange</a>
            </div>
            <div id="topbar">
                <div id="hlinks">
                    
<span id="hlinks-user"></span>
<span id="hlinks-nav">                        <a href="/users/login?returnurl=%2fquestions%2f1663%2fshuffle-a-deck-without-local-variables">sign up</a>

 <span class="lsep">|</span>
                    <a href="/users/login?returnurl=%2fquestions%2f1663%2fshuffle-a-deck-without-local-variables">log in</a>

 <span class="lsep">|</span>
</span>
<span id="hlinks-custom"></span>
                </div>
                <div id="hsearch">
                    <form id="search" action="/search" method="get" autocomplete="off">
                        <div>
                            <input autocomplete="off" name="q" class="textbox" placeholder="search" tabindex="1" type="text" maxlength="240" size="28" value="">
                        </div>
                    </form>
                </div>
            </div>
            <br class="cbt">
            <div id="hlogo">
                <a href="/">
                    Programming Puzzles &amp; Code Golf
                        <span class="beta-title">beta</span>
                </a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs mainnavsanon">
                    <ul>
                            <li class="youarehere"><a id="nav-questions" href="/questions">Questions</a></li>
                            <li><a id="nav-tags" href="/tags">Tags</a></li>
                            <li><a id="nav-tour" href="/about">Tour</a></li>
                            <li><a id="nav-users" href="/users">Users</a></li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion"  href="/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        



        <div id="content">
            

<div itemscope itemtype="http://schema.org/Article">
	<link itemprop="image" href="//cdn.sstatic.net/codegolf/img/apple-touch-icon.png">
			<!--googleoff: all-->
<div id="herobox-mini">
    <div id="hero-content">
        <span id="controls">
            <a href="/about" id="tell-me-more" class="button">Tell me more</a>
            <span id="close"><a title="click to dismiss">&times;</a></span>
        </span>
        <div id="blurb">
            Programming Puzzles &amp; Code Golf Stack Exchange is a question and answer site for programming puzzle enthusiasts and code golfers. It&#39;s 100% free, no registration required.
        </div>        
    </div>
    <script>
        $('#tell-me-more').click(function () {
            var clickSource = $("body").attr("class") + '-mini';
            if ($("body").hasClass("questions-page")) {
                clickSource = 'questionpagemini';
            }
            if ($("body").hasClass("home-page")) {
                clickSource = 'homepagemini';
            }

            StackExchange.using("gps", function () {
                StackExchange.gps.track("aboutpage.click", { aboutclick_location: clickSource } , true);
            });
        });
        $('#herobox-mini #close').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: "close" }, true);
            });
            $.cookie("hero", "none", { path: "/" });
            var $hero = $("#herobox-mini");
            $hero.slideUp('fast', function () { $hero.remove(); });
            return false;
        });
    </script>
</div>
			<!--googleon: all-->
			<div id="question-header">
			<h1 itemprop="name"><a href="/questions/1663/shuffle-a-deck-without-local-variables" class="question-hyperlink">Shuffle a deck without local variables</a></h1>
		</div>
			<div id="mainbar">

			

<div class="question" data-questionid="1663"  id="question">
    
        <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1663">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear">up vote</a>
    <span class="vote-count-post ">7</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful">down vote</a>
    
    <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b></b></div>   

</div>

            </td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="description">

        <p>The object of this puzzle is to take a deck of 52 cards and shuffle it so that each card is in a random position.</p>

<p>Given (i.e. assumed to exist already):</p>

<ul>
<li>A length-52 array of integers representing the deck. When you start, <code>deck</code> contains <em>exactly one</em> of each card in some unknown order.</li>
<li>A function, <code>int rand(int min, int max)</code>, that returns a random integer between <code>min</code> and <code>max</code>, inclusive. You can assume that this function is truly random.</li>
<li>A <code>swap</code> function that takes two ints (by reference) and runs the <a href="http://en.wikipedia.org/wiki/XOR_swap_algorithm" rel="nofollow">XOR swap algorithm</a>. If you call <code>swap(x, y)</code>, the values of <code>x</code> and <code>y</code> will be exchanged.</li>
</ul>

<p>Result:</p>

<ul>
<li><code>deck</code> should contain exactly one of each integer from 0 to 51 (inclusive), in a completely random order.</li>
</ul>

<p>Difficulty: </p>

<ul>
<li><strong>You can't declare any variables.</strong> Call <code>swap</code> and <code>rand</code> as much as you like, but you can't declare any variables of your own.</li>
</ul>

<p>Clarifications: </p>

<ul>
<li><code>deck</code> can be a global variable, or you can take it in as a parameter. </li>
<li>Obviously you can change what's in <code>deck</code> (that's the point), but you can't change its size.</li>
<li>Card values don't really matter, but let's say they're valued in S-H-C-D order, so 0 is the ace of spades, 12 is the king of spades, and 51 is the king of diamonds.</li>
<li>Execution time doesn't matter, but true randomness does.</li>
<li>You can write this in any language, but no fair using stuff like PHP's <code>shuffle</code> function.</li>
<li>This isn't really code golf, but feel free to minimize/obfuscate your code. Even without removing whitespace, IIRC I can do it in something like 4 lines in C# or PHP.</li>
</ul>

<p>I have a test program somewhere around here that plots the frequency of each card in each position. I'll post it when I get the chance, or you can write you own for a little extra credit.</p>

<hr>

<p><strong>Edit</strong>: Here's some test code to check for randomness in your results: </p>

<ul>
<li>C# tester codebehind: <a href="http://pastebin.com/Z0y9mCEt" rel="nofollow">http://pastebin.com/Z0y9mCEt</a></li>
<li>ASP.NET: <a href="http://pastebin.com/RiuW7g25" rel="nofollow">http://pastebin.com/RiuW7g25</a></li>
<li>Stub with the <code>swap</code> and <code>rand</code> utility methods: <a href="http://pastebin.com/atAvhuB3" rel="nofollow">http://pastebin.com/atAvhuB3</a></li>
<li>Quick-and-dirty JavaScript visualizer (less rigorous): <a href="http://pastebin.com/gXhaqsqt" rel="nofollow">http://pastebin.com/gXhaqsqt</a></li>
</ul>

<p>As a testing method it's not terribly strong, but it makes it easy to visualize severe problems in the shuffling. Ideally, the result should look like snow without any apparent pattern. Certain mistakes in the randomization will cause noticeable patterns in the result. It also throws an exception if you don't have exactly one of every card.</p>

<p>Here's an example of the visualizer's output comparing two shuffle methods, one truly random and the other one only partially so:</p>

<p><img src="http://i.stack.imgur.com/XxP6e.jpg" alt="Visualizer output"></p>

<p>As you can see, patterns in the results should be easy to spot.</p>

    </div>
    <div class="post-taglist">
        <a href="/questions/tagged/code-challenge" class="post-tag" title="show questions tagged &#39;code-challenge&#39;" rel="tag">code-challenge</a> <a href="/questions/tagged/puzzle" class="post-tag" title="show questions tagged &#39;puzzle&#39;" rel="tag">puzzle</a> <a href="/questions/tagged/random" class="post-tag" title="show questions tagged &#39;random&#39;" rel="tag">random</a> 
    </div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/q/1663" title="short permalink to this question" class="short-link" id="link-post-1663">share</a><span class="lsep">|</span><a href="/posts/1663/edit" class="suggest-edit-post" title="">improve this question</a></div>        
    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1663/revisions" title="show all edits to this post">edited <span title="2013-07-16 10:10:44Z" class="relativetime">Jul 16 at 10:10</span></a>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/2180/boothby"><div><img src="https://www.gravatar.com/avatar/a2d4a9713be4f9cc6d701f0827612e76?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/2180/boothby">boothby</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">2,887</span><span title="6 silver badges"><span class="badge2"></span><span class="badgecount">6</span></span><span title="30 bronze badges"><span class="badge3"></span><span class="badgecount">30</span></span>
    </div>
</div>    </td>
    <td class="post-signature owner">
        
<div class="user-info ">
    <div class="user-action-time">
        
        
            asked <span title="2011-03-17 16:02:42Z" class="relativetime">Mar 17 '11 at 16:02</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/1052/justin-morgan"><div><img src="https://www.gravatar.com/avatar/b966e5051e09ff1c2734bef286f0779b?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1052/justin-morgan">Justin Morgan</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">229</span><span title="1 silver badge"><span class="badge2"></span><span class="badgecount">1</span></span><span title="9 bronze badges"><span class="badge3"></span><span class="badgecount">9</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</div>
</td>
        </tr>
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1663" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="11" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-2932" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Many languages model arrays as effectively infinite, thus allowing $deck[52] and onwards to be used in place of local variables. Perhaps this should be prohibited too.</span>
	&ndash;&nbsp;
		<a href="/users/668/timwi" 
		   title="2467 reputation" 
		   class="comment-user">Timwi</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 18:02:17Z" class="relativetime-clean">Mar 17 '11 at 18:02</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2939" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">2</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Are functions considered variable? are function parameters considered variables?</span>
	&ndash;&nbsp;
		<a href="/users/750/zzzzbov" 
		   title="657 reputation" 
		   class="comment-user">zzzzBov</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 18:37:10Z" class="relativetime-clean">Mar 17 '11 at 18:37</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2941" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@zzzzBov - What I had in mind was that function parameters would be considered variables, but I didn&#39;t specify that before @mellamokb&#39;s answer. I know it can be done without any parameters other than <code>deck</code> itself.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 18:44:24Z" class="relativetime-clean">Mar 17 '11 at 18:44</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2950" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@eBusiness - That&#39;s a problem with me, not the question itself. And I was upvoting because the answerer found a loophole.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 19:58:36Z" class="relativetime-clean">Mar 17 '11 at 19:58</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3930" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@user unknown - I think I understand. The answer is basically that you can assume whatever implementation of <code>swap</code> you like, as long as it fulfills its basic purpose. Part of my reason for making <code>swap</code> a given was so that people could treat it as &#39;magic&#39; and concentrate on the main problem without having to worry about it working in their language of choice. You can either do that or write your own <code>swap</code>, it&#39;s up to you.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-04-20 23:19:03Z" class="relativetime-clean">Apr 20 '11 at 23:19</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1663" data-rep=50 data-anon=true
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments." 
				>show <b>11</b> more comments</a>
    </td>
</tr>            </table>    
</div>


			<div id="answers">

				<a name="tab-top"></a>
				<div id="answers-header">
					<div class="subheader answers-subheader">
						<h2>
								13 Answers
						</h2>
						<div>
							<div id="tabs">
        <a href="/questions/1663/shuffle-a-deck-without-local-variables?answertab=active#tab-top" title="Answers with the latest activity first">active</a>
        <a href="/questions/1663/shuffle-a-deck-without-local-variables?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a>
        <a class="youarehere" href="/questions/1663/shuffle-a-deck-without-local-variables?answertab=votes#tab-top" title="Answers with the highest score first">votes</a>
</div>
						</div>
					</div>    
				</div>    




  
<a name="1674"></a>
<div id="answer-1674" class="answer accepted-answer" data-answerid="1674" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1674">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">4</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


        <span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted...">accepted</span>
</div>

            </td>



<td class="answercell">
    <div class="post-text"><h1>JavaScript</h1>

<p>I believe this is the intended form of solution, I use the card in position 0 to keep track of progress, only shuffling the cards that have already been used as counter, this achieves the standard 52! permutations with a perfect equal distribution. The procedure is complicated by XOR swap not allowing that an element is swapped by itself.</p>

<p>Edit: I built in a sorting that sorts each element into place just before it is used, thus allowing this to work with an unsorted array. I also dropped recursive calling in favour of a while loop.</p>

<pre><code>deck=[]
for(a=0;a&lt;52;a++){
    deck[a]=a
}
function swap(a,b){
    deck[a]=deck[b]^deck[a]
    deck[b]=deck[b]^deck[a]
    deck[a]=deck[b]^deck[a]
}
function rand(a,b){
    return Math.floor(Math.random()*(1+b-a))+a
}
function shuffle(){
    while(deck[0]!=0){ //Sort 0 into element 0
        swap(0,deck[0])
    }
    while(deck[0]&lt;51){ //Run 51 times
        while(deck[deck[0]+1]!=deck[0]+1){ //Sort element deck[0]+1 into position deck[0]+1
            swap(deck[deck[0]+1],deck[0]+1)
        }
        swap(0,deck[0]+1) //Swap element deck[0]+1 into position 0, thus increasing the value of deck[0] by 1
        if(rand(0,deck[0]-1)){ //Swap the element at position deck[0] to a random position in the range 1 to deck[0]
            swap(deck[0],rand(1,deck[0]-1))
        }
    }
    if(rand(0,51)){ //Swap the element at position 0 to a random position
        swap(0,rand(1,51))
    }
}
for(c=0;c&lt;100;c++){
    shuffle()
    document.write(deck+"&lt;br&gt;")
}
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1674" title="short permalink to this answer" class="short-link" id="link-post-1674">share</a><span class="lsep">|</span><a href="/posts/1674/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1674/revisions" title="show all edits to this post">edited <span title="2011-03-17 21:56:14Z" class="relativetime">Mar 17 '11 at 21:56</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-17 19:15:16Z" class="relativetime">Mar 17 '11 at 19:15</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/101/ebusiness"><div><img src="https://www.gravatar.com/avatar/17d8504e08f80290fce98a133d4a017e?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/101/ebusiness">eBusiness</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,533</span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="14 bronze badges"><span class="badge3"></span><span class="badgecount">14</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1674" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-2970" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">That&#39;s exactly what I had in mind. Soon as I test this I&#39;ll upvote and probably accept.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 23:52:36Z" class="relativetime-clean">Mar 17 '11 at 23:52</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2976" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Appears to work fine, although on closer inspection it&#39;s not exactly the same as mine. Accepted, and I&#39;ll post my own answer soon.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-18 04:36:47Z" class="relativetime-clean">Mar 18 '11 at 4:36</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3895" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">This is also known as Knuth shuffle algorithm (<a href="http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle" rel="nofollow">en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle</a>).</span>
	&ndash;&nbsp;
		<a href="/users/1306/bob" 
		   title="101 reputation" 
		   class="comment-user">Bob</a>
	<span class="comment-date" dir="ltr"><span title="2011-04-19 10:14:54Z" class="relativetime-clean">Apr 19 '11 at 10:14</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1674" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1669"></a>
<div id="answer-1669" class="answer" data-answerid="1669" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1669">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">10</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h2>Haskell</h2>

<p>Here is a point-free implementation.  No variables, formal parameters, or explicit recursion.  I used <a href="http://www.haskell.org/haskellwiki/Lambdabot" rel="nofollow">lambdabot</a>'s <code>@pl</code> ("pointless") refactoring feature quite a bit.</p>

<pre><code>import Data.List
import Control.Applicative
import Control.Monad
import System.Random

shuffle :: [a] -&gt; IO [a]
shuffle = liftM2 (&lt;$&gt;) ((fst .) . foldl' (uncurry ((. flip splitAt) . (.) .
          (`ap` snd) . (. fst) . flip flip tail . (ap .) . flip flip head .
          ((.) .) . (. (++)) . flip . (((.) . (,)) .) . flip (:))) . (,) [])
          (sequence . map (randomRIO . (,) 0 . subtract 1) . reverse .
          enumFromTo 1 . length)

main = print =&lt;&lt; shuffle [1..52]
</code></pre>

<p>Here's my test procedure to make sure the numbers were uniformly distributed:</p>

<pre><code>main = print . foldl' (zipWith (+)) (replicate 52 0)
       =&lt;&lt; replicateM 1000 (shuffle [1..52])
</code></pre>

<p>Here is the original algorithm:</p>

<pre><code>shuffle :: [a] -&gt; IO [a]
shuffle xs = shuffleWith xs &lt;$&gt;
             sequence [randomRIO (0, i - 1) | i &lt;- reverse [1..length xs]]

shuffleWith :: [a] -&gt; [Int] -&gt; [a]
shuffleWith xs ns = fst $ foldl' f ([], xs) ns where
    f (a,b) n = (x:a, xs++ys) where
        (xs, x:ys) = splitAt n b
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1669" title="short permalink to this answer" class="short-link" id="link-post-1669">share</a><span class="lsep">|</span><a href="/posts/1669/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1669/revisions" title="show all edits to this post">edited <span title="2011-03-17 17:55:37Z" class="relativetime">Mar 17 '11 at 17:55</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-17 17:49:58Z" class="relativetime">Mar 17 '11 at 17:49</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/38/joey-adams"><div><img src="https://www.gravatar.com/avatar/1355030928a7422efe6349a3ae9bca83?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/38/joey-adams">Joey Adams</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">3,886</span><span title="12 silver badges"><span class="badge2"></span><span class="badgecount">12</span></span><span title="38 bronze badges"><span class="badge3"></span><span class="badgecount">38</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1669" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="1" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-2942" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">+1 for Haskell. Now I have to learn Haskell so I can read this. :P</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 18:45:40Z" class="relativetime-clean">Mar 17 '11 at 18:45</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2947" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">How is the progress stored?</span>
	&ndash;&nbsp;
		<a href="/users/101/ebusiness" 
		   title="1533 reputation" 
		   class="comment-user">eBusiness</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 19:22:27Z" class="relativetime-clean">Mar 17 '11 at 19:22</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2955" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Justin E. Morgan: My point-free answer doesn&#39;t exactly jump out as &quot;readable&quot; to me.  The second and third code blocks should be readable, though.</span>
	&ndash;&nbsp;
		<a href="/users/38/joey-adams" 
		   title="3886 reputation" 
		   class="comment-user">Joey Adams</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 20:33:07Z" class="relativetime-clean">Mar 17 '11 at 20:33</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2971" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">4</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">I doubt anyone but Haskell programmers will say that their code is pointless and be proud of it.</span>
	&ndash;&nbsp;
		<a href="/users/101/ebusiness" 
		   title="1533 reputation" 
		   class="comment-user">eBusiness</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-18 01:12:17Z" class="relativetime-clean">Mar 18 '11 at 1:12</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3019" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">3</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">This <code>((.) .) . (. (++))</code> and this <code>(((.) . (,)) .)</code> are my favorite. Wow lambdabot. Just, wow.</span>
	&ndash;&nbsp;
		<a href="/users/930/dan-burton" 
		   title="119 reputation" 
		   class="comment-user">Dan Burton</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-19 22:12:01Z" class="relativetime-clean">Mar 19 '11 at 22:12</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1669" data-rep=50 data-anon=true
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>show <b>1</b> more comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1673"></a>
<div id="answer-1673" class="answer" data-answerid="1673" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1673">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">4</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h1>J</h1>

<p>Ignoring that deck is a variable, there's the obvious...</p>

<pre><code>52 ? 52
</code></pre>

<p>Of course, if you really want a function, there's this, which will work even if you forget to remove the jokers (or try to shuffle something other than cards).</p>

<pre><code>{~ (# ? #)
</code></pre>

<p>So that...</p>

<pre><code>shuffle =: {~ (# ? #)
deck =: i. 52
shuffle deck
</code></pre>

<p>This is probably outside the intent of the question, which would be to implement the shuffle yourself from rand (<code>?</code>). I might do that later when I'm not supposed to be working.</p>

<h1>Explanation</h1>

<p>Explanation of <code>52 ? 52</code>:</p>

<ul>
<li><code>x ? y</code> is x random unique items from y. </li>
</ul>

<p>Explanation of <code>{~ (# ? #)</code> is harder because of <a href="http://www.jsoftware.com/help/jforc/forks_hooks_and_compound_adv.htm" rel="nofollow">forks and hooks</a>. Basically, it is the same as <code>shuffle =: 3 : '((# y) ? (# y)) { y'</code>, which has one implicit argument (<code>y</code>). </p>

<ul>
<li><code># y</code> gives the length of y</li>
<li>This gives 52 ? 52 like before, which is a random permutation of 0..51</li>
<li><code>x { y</code> is the item of y in index x, or (in this case) items in the indexes in x.</li>
<li>This lets you shuffle whatever is passed in, not just integers.</li>
</ul>

<p>See <a href="http://www.jsoftware.com/help/dictionary/vocabul.htm" rel="nofollow">J Vocabulary</a> for details of operators, though the syntax and semantics are quite a bit tricky because of rank and tacit programming.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1673" title="short permalink to this answer" class="short-link" id="link-post-1673">share</a><span class="lsep">|</span><a href="/posts/1673/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1673/revisions" title="show all edits to this post">edited <span title="2011-03-18 03:58:03Z" class="relativetime">Mar 18 '11 at 3:58</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-17 19:02:10Z" class="relativetime">Mar 17 '11 at 19:02</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/957/jesse-millikan"><div><img src="https://www.gravatar.com/avatar/b992d3ca1d3c245da9d16ab657562d89?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/957/jesse-millikan">Jesse Millikan</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">940</span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="9 bronze badges"><span class="badge3"></span><span class="badgecount">9</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1673" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-2945" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">+1: Working on code-golf when supposed to be working.. lol I am too :P</span>
	&ndash;&nbsp;
		<a href="/users/879/mellamokb" 
		   title="1554 reputation" 
		   class="comment-user">mellamokb</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 19:11:15Z" class="relativetime-clean">Mar 17 '11 at 19:11</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2968" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Can you explain what this does for the J-impaired? I recently heard it described as an explosion in an emoticon factory (<a href="http://codegolf.stackexchange.com/questions/1294/anagram-code-golf/1296#1296" title="anagram code golf">codegolf.stackexchange.com/questions/1294/anagram-code-golf/&hellip;</a>), which sounds about right.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 23:50:38Z" class="relativetime-clean">Mar 17 '11 at 23:50</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2973" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Justin: Explanation added.</span>
	&ndash;&nbsp;
		<a href="/users/957/jesse-millikan" 
		   title="940 reputation" 
		   class="comment-user">Jesse Millikan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-18 03:58:32Z" class="relativetime-clean">Mar 18 '11 at 3:58</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1673" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1679"></a>
<div id="answer-1679" class="answer" data-answerid="1679" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1679">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">3</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h3>Using factoradic representation</h3>

<p>In the <a href="http://en.wikipedia.org/wiki/Factorial_number_system" rel="nofollow">factoradic representation</a> of a permutation an element i takes values from 0 to N-i. So a random permutation is just <code>rand(0,i)</code> for every N-i. </p>

<p>In J:</p>

<pre><code>? |.&gt;:i.52
2 39 20 26 ... 2 0 1 0 0 0
</code></pre>

<p>where <code>? x</code> is <code>rand(0,x-1)</code> and <code>|.&gt;:i.52</code> is <code>52 51 ... 1</code></p>

<p>Then, if <code>a</code> is the value of ith factoradic, we do the swap: <code>swap(deck[i], deck[i+a])</code>.
The list of pairs to swap are:</p>

<pre><code>(,. i.52) ,. (,. ((?|.&gt;:i.52)+i.52))
0 33
1 20
2  3
...
49 50
50 50
51 51
</code></pre>

<p>The swap we'll be using works like this:</p>

<pre><code>deck
24 51 14 18 ...
deck =: 0 1 swap deck
51 24 14 18 ...
</code></pre>

<p>It's not really "by reference" but there are no real functions in J.</p>

<p>We'll use deck's length (<code>#deck</code>) to avoid using a constant.</p>

<h3>Complete program in J:</h3>

<pre><code>deck =: 52 ? 52                           NB. Initial random deck
swap =: 4 : 'deck =: (x { y) (|.x) } y'   NB. Given swap "function"
f =: 3 : 0                                NB. function that calls the swap for a pair
({.y) swap deck
}.y
)
f^:(#deck) (,.,.[:,.]+[:?[:|.&gt;:) i.#deck
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1679" title="short permalink to this answer" class="short-link" id="link-post-1679">share</a><span class="lsep">|</span><a href="/posts/1679/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-18 00:34:53Z" class="relativetime">Mar 18 '11 at 0:34</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/46/eelvex"><div><img src="https://www.gravatar.com/avatar/df9b973096cb7b79c33a16e219e131e6?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/46/eelvex">Eelvex</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">3,032</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="9 silver badges"><span class="badge2"></span><span class="badgecount">9</span></span><span title="26 bronze badges"><span class="badge3"></span><span class="badgecount">26</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1679" class="comments dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">
					    <tr><td></td><td></td></tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1679" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1730"></a>
<div id="answer-1730" class="answer" data-answerid="1730" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1730">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">3</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h1>C#</h1>

<p>Great job, everyone. Here's my own answer in C# based on <a href="http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle" rel="nofollow">the Fisher-Yates algorithm</a> (6 lines, for those keeping track). </p>

<p>The idea is to partially sort the deck until <code>deck[0] == 0</code>. Once you know the value at that position, you can freely use it as a counter as long as you set it back to zero when you're done. </p>

<p>Then, for each position <code>i</code> from 1 to 51, you swap <code>deck[i]</code> with <code>deck[rand(i, 51)]</code> (<strong>not</strong> rand(1, 51), that will throw off the randomness). Finally, set <code>deck[0]</code> back to zero and swap it with a random card. Should be a perfectly random shuffle.</p>

<pre><code>public static void shuffle(int[] deck)
{
    while (deck[0] &gt; 0)
        swap(ref deck[0], ref deck[deck[0]]);

    for (deck[0] = 1; deck[0] &lt; 52; deck[0]++)
        swap(ref deck[deck[0]], ref deck[rand(deck[0], 51)]);

    deck[0] = 0;
    swap(ref deck[0], ref deck[rand(0, 51)]);
}
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1730" title="short permalink to this answer" class="short-link" id="link-post-1730">share</a><span class="lsep">|</span><a href="/posts/1730/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1730/revisions" title="show all edits to this post">edited <span title="2011-03-21 17:06:25Z" class="relativetime">Mar 21 '11 at 17:06</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature owner">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-21 15:59:00Z" class="relativetime">Mar 21 '11 at 15:59</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/1052/justin-morgan"><div><img src="https://www.gravatar.com/avatar/b966e5051e09ff1c2734bef286f0779b?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1052/justin-morgan">Justin Morgan</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">229</span><span title="1 silver badge"><span class="badge2"></span><span class="badgecount">1</span></span><span title="9 bronze badges"><span class="badge3"></span><span class="badgecount">9</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1730" class="comments dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">
					    <tr><td></td><td></td></tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1730" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1667"></a>
<div id="answer-1667" class="answer" data-answerid="1667" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1667">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h2>JavaScript</h2>

<p><strong>NOTE: This solution is technically not correct because it uses a second parameter, <code>i</code>, in the call to <code>shuffle</code>, which counts as an external variable.</strong></p>

<pre><code>function shuffle(deck, i) {
    if (i &lt;= 0)
        return;
    else {
        swap(deck[rand(0,i-1)], deck[i-1]);
        shuffle(deck, i - 1);
    }
}
</code></pre>

<p>Call with <code>shuffle(deck,52)</code></p>

<p>A complete working example (had to modify <code>swap</code> slightly because there is no pass-by-reference of ints in JavaScript):</p>

<pre><code>function rand(min, max) { return Math.floor(Math.random()*(max-min+1)+min); }
function swap(deck, i, j) {
    var t=deck[i];
    deck[i] = deck[j];
    deck[j] = t;
}

function shuffle(deck, i) {
    if (i &lt;= 0)
        return;
    else {
        swap(deck, rand(0,i-1), i-1);
        shuffle(deck, i - 1);
    }
}

// create deck
var deck=[];
for(i=0;i&lt;52;i++)deck[i]=i;
document.writeln(deck);
shuffle(deck,52);
document.writeln(deck);
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1667" title="short permalink to this answer" class="short-link" id="link-post-1667">share</a><span class="lsep">|</span><a href="/posts/1667/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1667/revisions" title="show all edits to this post">edited <span title="2011-03-17 20:43:06Z" class="relativetime">Mar 17 '11 at 20:43</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-17 17:05:15Z" class="relativetime">Mar 17 '11 at 17:05</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/879/mellamokb"><div><img src="https://www.gravatar.com/avatar/37b82b77d83d9db3e5b2784f2080dc3c?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/879/mellamokb">mellamokb</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,554</span><span title="6 silver badges"><span class="badge2"></span><span class="badgecount">6</span></span><span title="16 bronze badges"><span class="badge3"></span><span class="badgecount">16</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1667" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-2944" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Well done. What I had in mind was considering parameters of <code>shuffle</code> as variables, but I didn&#39;t specify that so +1. Nice use of recursion, too.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 18:48:51Z" class="relativetime-clean">Mar 17 '11 at 18:48</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2946" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">-1, doesn&#39;t generate all permutations, this is obvious because element 51 will never occupy it&#39;s original place, and because you only call rand enough to generate 51! permutations out of the possible 52!</span>
	&ndash;&nbsp;
		<a href="/users/101/ebusiness" 
		   title="1533 reputation" 
		   class="comment-user">eBusiness</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 19:20:52Z" class="relativetime-clean">Mar 17 '11 at 19:20</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2953" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">2</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@eBusiness: In the original spec, the deck is arbitrarily ordered, not necessarily in the order 1-52.  I just used that because it was the easiest.</span>
	&ndash;&nbsp;
		<a href="/users/879/mellamokb" 
		   title="1554 reputation" 
		   class="comment-user">mellamokb</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 20:25:11Z" class="relativetime-clean">Mar 17 '11 at 20:25</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2954" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@eBusiness: I modified to allow for the possibility of leaving the element in the same spot, by using <code>deck&#91;rand(0,i-1)&#93;</code> instead of <code>deck&#91;rand(0,i-2)&#93;</code>.  Also swap all the way to <code>i=0</code> instead of stopping at <code>i=1</code>.  Does that help?</span>
	&ndash;&nbsp;
		<a href="/users/879/mellamokb" 
		   title="1554 reputation" 
		   class="comment-user">mellamokb</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 20:28:30Z" class="relativetime-clean">Mar 17 '11 at 20:28</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2962" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Yup, that should do it, except that you now break the XOR swap specification.</span>
	&ndash;&nbsp;
		<a href="/users/101/ebusiness" 
		   title="1533 reputation" 
		   class="comment-user">eBusiness</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 21:05:47Z" class="relativetime-clean">Mar 17 '11 at 21:05</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1667" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1676"></a>
<div id="answer-1676" class="answer" data-answerid="1676" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1676">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h2>Python</h2>

<pre><code>import random
def rand(x, y):
 return random.randrange(x, y+1)

def swap(deck, x, y):
 deck[x] ^= deck[y]
 deck[y] ^= deck[x]
 deck[x] ^= deck[y]

def shuffle(deck):
 if len(deck)&gt;1:
  deck[1:]=shuffle(deck[1:])
  if rand(0,len(deck)-1)&gt;0:swap(deck, 0, rand(1, len(deck)-1))
 return deck

print shuffle(range(52))
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1676" title="short permalink to this answer" class="short-link" id="link-post-1676">share</a><span class="lsep">|</span><a href="/posts/1676/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1676/revisions" title="show all edits to this post">edited <span title="2011-03-21 21:37:08Z" class="relativetime">Mar 21 '11 at 21:37</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-17 21:44:43Z" class="relativetime">Mar 17 '11 at 21:44</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/67/keith-randall"><div><img src="https://www.gravatar.com/avatar/530468741a302061e8de23f38b2fcfc2?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/67/keith-randall">Keith Randall</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">9,474</span><span title="11 silver badges"><span class="badge2"></span><span class="badgecount">11</span></span><span title="43 bronze badges"><span class="badge3"></span><span class="badgecount">43</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1676" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-3066" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">What does the <code>&#91;1:&#93;</code> mean? Does that recurse on a sub-array of <code>deck</code>?</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-21 15:23:02Z" class="relativetime-clean">Mar 21 '11 at 15:23</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3085" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Yes, [1:] means the subarray from index 1 to the end of the array.  So it recursively shuffles everything but the first element, assigns (copies) it back to the same place in the original array, then randomly places the first element somewhere.</span>
	&ndash;&nbsp;
		<a href="/users/67/keith-randall" 
		   title="9474 reputation" 
		   class="comment-user">Keith Randall</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-21 20:20:20Z" class="relativetime-clean">Mar 21 '11 at 20:20</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3087" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Very clever. I think this is one of the prettiest solutions on here, and it uses the Fisher-Yates algorithm correctly. +1. This has been a nice way for me to see the beauty of languages I&#39;m not familiar with.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-21 20:28:46Z" class="relativetime-clean">Mar 21 '11 at 20:28</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1676" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1675"></a>
<div id="answer-1675" class="answer" data-answerid="1675" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1675">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h2>C++</h2>

<pre><code>#include &lt;cstdlib&gt;
#include &lt;ctime&gt;
#include &lt;iostream&gt;

int deck[52];

void swap(int a, int b) {
    deck[a] ^= deck[b];
    deck[b] ^= deck[a];
    deck[a] ^= deck[b];
}

int r(int a, int b) {
    return a + (rand() % (b - a + 1));
}

void s(int *deck) {
    swap(1, r(2, 51));
    deck[0] *= 100;

    for(deck[0] += 2; (deck[0] % 100) &lt; 51; deck[0]++) {
        swap(deck[0] % 100,
          r(0, 1) ? r(1, (deck[0] % 100) - 1) : r((deck[0] % 100) + 1, 51));
    }
    swap(51, r(1, 50)); 

    deck[0] = (deck[0] - 51) / 100;
    swap(r(1, 51), 0);
}

int main(int a, char** c)
{
    srand(time(0));

    for (int i = 0; i &lt; 52; i++)
        deck[i] = i;

    s(deck);
    s(deck);

    for (int i = 0; i &lt; 52; i++)
        std::cout &lt;&lt; deck[i] &lt;&lt; " ";
}
</code></pre>

<p>Avoids swapping elements with themselves, so has to call twice to be random.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1675" title="short permalink to this answer" class="short-link" id="link-post-1675">share</a><span class="lsep">|</span><a href="/posts/1675/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1675/revisions" title="show all edits to this post">edited <span title="2011-03-17 21:44:07Z" class="relativetime">Mar 17 '11 at 21:44</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-17 19:26:54Z" class="relativetime">Mar 17 '11 at 19:26</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/76/matthew-read"><div><img src="https://www.gravatar.com/avatar/9f45abdea17c709041812609c7fdfb69?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/76/matthew-read">Matthew Read</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">306</span><span title="1 silver badge"><span class="badge2"></span><span class="badgecount">1</span></span><span title="16 bronze badges"><span class="badge3"></span><span class="badgecount">16</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1675" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="1" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-2952" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy"><code>swap(deck&#91;rand(1, 51)&#93;, (deck&#91;0&#93; - 51) &#47; 100);</code> How will <code>swap</code> know where to put the second value? You&#39;re also missing a <code>)</code>.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 20:13:03Z" class="relativetime-clean">Mar 17 '11 at 20:13</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2956" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Oops, thanks.  I started moving that part during a revision and must have got distracted before finishing it :P</span>
	&ndash;&nbsp;
		<a href="/users/76/matthew-read" 
		   title="306 reputation" 
		   class="comment-user">Matthew Read</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 20:35:06Z" class="relativetime-clean">Mar 17 '11 at 20:35</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2964" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Downvote wasn&#39;t from me, BTW. I&#39;ll test when I can.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 21:23:15Z" class="relativetime-clean">Mar 17 '11 at 21:23</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-2965" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">OK.  I made it easier to test by providing a full program.</span>
	&ndash;&nbsp;
		<a href="/users/76/matthew-read" 
		   title="306 reputation" 
		   class="comment-user">Matthew Read</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-17 21:44:35Z" class="relativetime-clean">Mar 17 '11 at 21:44</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3003" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Very clever. My own solution used <code>deck&#91;0&#93;</code>, but not in the way you have.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-19 03:51:38Z" class="relativetime-clean">Mar 19 '11 at 3:51</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1675" data-rep=50 data-anon=true
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>show <b>1</b> more comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="2121"></a>
<div id="answer-2121" class="answer" data-answerid="2121" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="2121">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h1>Ruby, one line</h1>

<p>Is this considered cheating? It should be as random as it gets.</p>

<pre><code>deck=(0..51).to_a # fill the deck
deck[0..51] = (0..51).map{deck.delete_at(rand deck.length)}
</code></pre>

<p>(Ruby's <code>rand</code> method only takes one argument and then generates a number n such that 0 &lt;= number &lt; argument.)</p>

<p>Additionally - similar to sogart's Perl solution, but as far as I know it doesn't suffer from the problem:</p>

<pre><code>deck = deck.sort_by{rand}
</code></pre>

<p>Ruby's sort_by is different than sort - it first generates the list of values to sort the array by, and only then sorts it by them. It's faster when it's expensive to find out the property we're sorting by, somewhat slower in all other cases. It's also useful in code golf :P</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/2121" title="short permalink to this answer" class="short-link" id="link-post-2121">share</a><span class="lsep">|</span><a href="/posts/2121/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-04-19 17:48:44Z" class="relativetime">Apr 19 '11 at 17:48</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/979/matma-rex"><div><img src="https://www.gravatar.com/avatar/39093dd2b68b68960fecd0fe2b9a5045?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/979/matma-rex">Matma Rex</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">121</span><span title="1 silver badge"><span class="badge2"></span><span class="badgecount">1</span></span><span title="3 bronze badges"><span class="badge3"></span><span class="badgecount">3</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-2121" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-3925" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">I wouldn&#39;t call it cheating, per se, but <code>deck&#91;0..51&#93;</code> does skirt the &quot;no variables&quot; rule somewhat by using a feature of the language. It&#39;s fair, I just think it loses some of the challenge. :) I don&#39;t know Ruby; can you explain the <code>(0..51).map{deck.delete_at(rand deck.length)}</code> part? Does that delete cards from <code>deck</code>?</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-04-20 20:27:42Z" class="relativetime-clean">Apr 20 '11 at 20:27</span></span>
		<span class="edited-yes" title="this comment was edited 2 times"></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-2121" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="4054"></a>
<div id="answer-4054" class="answer" data-answerid="4054" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="4054">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h2>D</h2>

<pre><code>shuffle(int[] d){
    while(d.length){
        if([rand(0,d.length-1)!=0)swap(d[0],d[rand(1,d.length-1)]);
        d=d[1..$];
    }
}
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/4054" title="short permalink to this answer" class="short-link" id="link-post-4054">share</a><span class="lsep">|</span><a href="/posts/4054/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/4054/revisions" title="show all edits to this post">edited <span title="2011-12-01 19:35:48Z" class="relativetime">Dec 1 '11 at 19:35</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-12-01 19:29:19Z" class="relativetime">Dec 1 '11 at 19:29</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/2005/ratchet-freak"><div><img src="https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/2005/ratchet-freak">ratchet freak</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">884</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="7 bronze badges"><span class="badge3"></span><span class="badgecount">7</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-4054" class="comments dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">
					    <tr><td></td><td></td></tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-4054" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1677"></a>
<div id="answer-1677" class="answer" data-answerid="1677" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1677">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">0</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p><strong>perl - this is not a proper shuffle as explained in comments!</strong> </p>

<pre><code>my @deck = (0..51);
@deck = sort {rand() &lt;=&gt; rand()} @deck;
print join("\n",@deck);
</code></pre>

<p>I think I didn't use anything as a swap etc. was that needed as part of the problem?</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1677" title="short permalink to this answer" class="short-link" id="link-post-1677">share</a><span class="lsep">|</span><a href="/posts/1677/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/1677/revisions" title="show all edits to this post">edited <span title="2011-03-21 16:06:09Z" class="relativetime">Mar 21 '11 at 16:06</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-03-17 23:58:00Z" class="relativetime">Mar 17 '11 at 23:58</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/1059/sogart"><div><img src="https://www.gravatar.com/avatar/ad15975e8b1fec47353f00dfb8051f9a?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1059/sogart">sogart</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">19</span><span title="3 bronze badges"><span class="badge3"></span><span class="badgecount">3</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1677" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-2972" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">3</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">That would work if sorting by a random function was a way of producing an even random distribution. However it is not. -1</span>
	&ndash;&nbsp;
		<a href="/users/101/ebusiness" 
		   title="1533 reputation" 
		   class="comment-user">eBusiness</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-18 02:10:16Z" class="relativetime-clean">Mar 18 '11 at 2:10</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3016" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">and why is it not? could you give me a link to read???</span>
	&ndash;&nbsp;
		<a href="/users/1059/sogart" 
		   title="19 reputation" 
		   class="comment-user">sogart</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-19 21:55:51Z" class="relativetime-clean">Mar 19 '11 at 21:55</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3022" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">The quality of the result will vary greatly depending on the sort algorithm, but in almost all cases the result will be very far from an equal distribution random function. Here is an article on the subject: <a href="http://sroucheray.org/blog/2009/11/array-sort-should-not-be-used-to-shuffle-an-array/" rel="nofollow">sroucheray.org/blog/2009/11/&hellip;</a></span>
	&ndash;&nbsp;
		<a href="/users/101/ebusiness" 
		   title="1533 reputation" 
		   class="comment-user">eBusiness</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-19 23:26:13Z" class="relativetime-clean">Mar 19 '11 at 23:26</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-3072" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Thanks a lot, that was really informative!</span>
	&ndash;&nbsp;
		<a href="/users/1059/sogart" 
		   title="19 reputation" 
		   class="comment-user">sogart</a>
	<span class="comment-date" dir="ltr"><span title="2011-03-21 16:05:33Z" class="relativetime-clean">Mar 21 '11 at 16:05</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1677" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="1974"></a>
<div id="answer-1974" class="answer" data-answerid="1974" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1974">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">0</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><h2>Javascript</h2>

<p>I'm not sure if it's "cheating" but my solution uses the native local array of a function's arguments. I included my self-made functions of <code>rand()</code> <code>swap()</code> and <code>filldeck()</code>. Of interesting note, this should work with a deck of any size.</p>

<pre><code>    var deck = [];

    function shuffle(){
        main(deck.length);
    }

    function main(){
        arguments[0] &amp;&amp; swap( arguments[0]-=1, rand(0, deck.length-1) ), main(arguments[0]);
    }

        function rand(min, max){
            return Math.floor( Math.random()*(max-min+1) )+min;
        }

        function swap(x, y){
            var _x = deck[x], _y = deck[y];
            deck[x] = _y, deck[y] = _x;
        }


        function filldeck(dL){
            for(var i=0; i&lt;dL; i++){
                var ran = rand(1,dL);
                while( deck.indexOf(ran) &gt;= 0 ){
                    ran = rand(1,dL);
                }
                deck[i] = ran;
            }
        }

    filldeck(52);
    shuffle();
</code></pre>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/1974" title="short permalink to this answer" class="short-link" id="link-post-1974">share</a><span class="lsep">|</span><a href="/posts/1974/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2011-04-06 17:24:55Z" class="relativetime">Apr 6 '11 at 17:24</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/1221/path411"><div><img src="https://www.gravatar.com/avatar/c9080a99eb0f13ae3c631a4ce79d4de8?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1221/path411">path411</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">101</span><span title="1 bronze badge"><span class="badge3"></span><span class="badgecount">1</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1974" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-8427" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">It is cheating, I think. However, it&#39;s very clever cheating, so nice job.</span>
	&ndash;&nbsp;
		<a href="/users/1052/justin-morgan" 
		   title="229 reputation" 
		   class="comment-user owner">Justin Morgan</a>
	<span class="comment-date" dir="ltr"><span title="2011-12-02 19:02:28Z" class="relativetime-clean">Dec 2 '11 at 19:02</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-1974" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="4074"></a>
<div id="answer-4074" class="answer" data-answerid="4074" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="4074">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">0</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>Another Perl solution, which actually produces uniformly distributed output:</p>

<pre><code>sub shuffle_integers {
    map int, sort {$a-int $a &lt;=&gt; $b-int $b} map $_+rand, @_;
}

say join " ", shuffle_integers 1 .. 52;
</code></pre>

<p>This solution uses Perl's <code>rand</code>, which returns a random number <em>x</em> in the range 0 &le; <em>x</em> &lt; 1.  It adds such a random number to each integer in the input, sorts the numbers according to their fractional parts, and finally strips those fractional parts away again.</p>

<p>(I believe the use of the special variables <code>$_</code>, <code>$a</code> and <code>$b</code> falls within the spirit of the challenge, since those are how perl passes the input to <code>map</code> and <code>sort</code>, and they're not used for any other purpose in the code.  In any case, I believe they're actually aliases to the input values, not independent copies.  This is not actually an in-place shuffle, though; both <code>map</code> and <code>sort</code> create copies of the input on the stack.)</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/4074" title="short permalink to this answer" class="short-link" id="link-post-4074">share</a><span class="lsep">|</span><a href="/posts/4074/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2011-12-02 15:32:35Z" class="relativetime">Dec 2 '11 at 15:32</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/3191/ilmari-karonen"><div><img src="https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/3191/ilmari-karonen">Ilmari Karonen</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">5,629</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="9 silver badges"><span class="badge2"></span><span class="badgecount">9</span></span><span title="40 bronze badges"><span class="badge3"></span><span class="badgecount">40</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-4074" class="comments dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">
					    <tr><td></td><td></td></tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-4074" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>
									<a name='new-answer'></a>
						<form id="post-form" action="/questions/1663/answer/submit" method="post"  class="post-form">
							<input type="hidden" id="post-id" value="1663" />
							<h2 class="space">Your Answer</h2>



    

<script type="text/javascript">
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });
        

    });  
</script>


<div id="post-editor" class="post-editor">

    <div style="position: relative;">     
        <div class="wmd-container">
            <div id="wmd-button-bar" class="wmd-button-bar"></div>
            <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101" data-min-length=""></textarea>
        </div>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>



    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="f51c005c36aeb04be7163e16a81b52d5">
        <input id="author" name="author" type="text">
    </div>
</div>
							<div style="position: relative;">
								
            <div class="form-item dno new-post-login">
        
                <div class="new-login-form">
                    <div class="new-login-left">
                        <h3>Sign up or <a id="login-link" href="/users/login?returnurl=%2fquestions%2f1663%2fshuffle-a-deck-without-local-variables%23new-answer">login</a></h3>
                        <script type="text/javascript">
                            StackExchange.ready(function () {
                                StackExchange.helpers.onClickDraftSave('#login-link');
                            });
                        </script>
                        <div class="preferred-login google-login">
                            <p><span class="icon"></span><span>Sign up using Google</span></p>
                        </div>
                        <div class="preferred-login facebook-login">
                            <p><span class="icon"></span><span>Sign up using Facebook</span></p>
                        </div>
                        <div class="preferred-login stackexchange-login">
                            <p><span class="icon"></span><span>Sign up using Stack Exchange</span></p>
                        </div>
                    </div>
                    <input type="hidden" name="manual-openid" class="manual-openid" />
                    <input type="hidden" name="use-facebook" class="use-facebook" value="false" />
                    <input type="button" class="submit-openid" value="Submit" style="display:none" />
                    <div class="new-login-right">
                                <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

                    </div>
                </div>
            </div>
            <script type="text/javascript">
                StackExchange.ready(
                    function () {
                        StackExchange.openid.initPostLogin('.new-post-login', '%2fquestions%2f1663%2fshuffle-a-deck-without-local-variables%23new-answer');
                    }
                );
            </script>
            <noscript>
                        <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

            </noscript>
							</div>
           
															<div class="form-submit cbt">
									<input id="submit-button" type="submit" value="Post Your Answer" tabindex="110">
									<a href="#" class="discard-answer dno">discard</a>

<p class="privacy-policy-agreement">
By posting your answer, you agree to the <a href='http://stackexchange.com/legal/privacy-policy' target='_blank'>privacy policy</a> and <a href='http://stackexchange.com/legal/terms-of-service' target='_blank'>terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1" />								</div>
						</form>



						<h2 class="bottom-notice">
Not the answer you&#39;re looking for?							Browse other questions tagged <a href="/questions/tagged/code-challenge" class="post-tag" title="show questions tagged &#39;code-challenge&#39;" rel="tag">code-challenge</a> <a href="/questions/tagged/puzzle" class="post-tag" title="show questions tagged &#39;puzzle&#39;" rel="tag">puzzle</a> <a href="/questions/tagged/random" class="post-tag" title="show questions tagged &#39;random&#39;" rel="tag">random</a>  or <a href="/questions/ask">ask your own question</a>.						</h2>
			</div>
		</div>
				<div id="sidebar" class="show-votes">
							<div class="module question-stats">
					<p class="label-key">tagged</p>
					<div class="tagged"><a href="/questions/tagged/code-challenge" class="post-tag" title="show questions tagged &#39;code-challenge&#39;" rel="tag">code-challenge</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">228</span></span><br>
<a href="/questions/tagged/puzzle" class="post-tag" title="show questions tagged &#39;puzzle&#39;" rel="tag">puzzle</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">44</span></span><br>
<a href="/questions/tagged/random" class="post-tag" title="show questions tagged &#39;random&#39;" rel="tag">random</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">22</span></span><br>
</div>
					<table id="qinfo">
						<tr>
							<td>
								<p class="label-key">asked</p>
							</td>
							<td style="padding-left: 10px">
								<p class="label-key" title="2011-03-17 16:02:42Z"><b>2 years ago</b></p>
							</td>
						</tr>
						<tr>
							<td>
								<p class="label-key">viewed</p>
							</td>

							<td style="padding-left: 10px">
								<p class="label-key">
									<b>1375 times</b>
								</p>
							</td>
						</tr>
							<tr>
								<td>
									<p class="label-key">active</p>
								</td>
								<td style="padding-left: 10px">
									<p class="label-key"><b><a href="?lastactivity" class="lastactivity-link" title="2013-07-16 10:10:44Z">4 months ago</a></b></p>
								</td>
							</tr>
					</table>
				</div>
						
			
    <div style="margin-bottom: 10px;">
        

<style type="text/css">
#newsletter-ad {
    width: 190px;
    height: 250px;
    overflow: hidden;
    background: url('//cdn.sstatic.net/beta/img/newsletter-ad.png');
    padding: 0 15px 0 15px;
}
#newsletter-ad-header {
    margin-top: 60px;
}
#newsletter-ad ul {
    margin: 1em 0 1em 1.5em;
}
#newsletter-ad ul li {
    margin-bottom: 5px;
}
#newsletter-signup-container {
    text-align: center;
}
#newsletter-preview-container {
    margin-top: 10px;
    text-align: center;
}
#newsletter-email-input {
    width: 200px;
}
</style>

<script>
    StackExchange.ready(function () {
        StackExchange.newsletterAd.init();
    });
</script>

<div id="newsletter-ad">
    <p id="newsletter-ad-header">Get the <b>weekly newsletter!</b></p>
    <ul>
        <li>Top questions and answers</li>
        <li>Important announcements</li>
        <li>Unanswered questions</li>
    </ul>
    <div id="newsletter-signup-container"><input id="newsletter-signup" type="button" value="Sign up for the newsletter" /></div>
    <p id="newsletter-preview-container">see an <a href="http://stackexchange.com/newsletters/newsletter?site=codegolf.stackexchange.com" id="newsletter-preview">example newsletter</a></p>
    <div class="dno">
        
<p class="privacy-policy-agreement">
By subscribing, you agree to the <a href='http://stackexchange.com/legal/privacy-policy' target='_blank'>privacy policy</a> and <a href='http://stackexchange.com/legal/terms-of-service' target='_blank'>terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1" />
    </div>
</div>

    </div>


<style type="text/css">
    .ads { margin-left: 60px; }
    .ad-container { width: 220px; height: 250px; margin-right: 20px; margin-bottom: 20px; }
    .ad-container .ad { height: 250px; }
    .ad-container .footer-container { overflow: hidden; height: 30px; position: relative; top: -30px; }
    .ad-container .footer-container .footer { font-family: Arial,Helvetic,Sans-Serif; font-size: 12px; text-align: center; padding-top: 9px; background-color: #000; color: #EFF; opacity: 0.9; filter: alpha(opacity=90); top: 30px; height: 30px; position: relative; }
    .ad-container a:hover { text-decoration: underline; }
    #adzerk2 { height: 250px; }
</style>
<script type="text/javascript">
    StackExchange.ready(function () {
        $(".ad-container").hover(
            function () {
                $(".ad-container .footer-container .footer").stop(true, true).animate({ top: "0px" }, "fast");
            },
            function () {
                $(".ad-container .footer-container .footer").animate({ top: "30px" }, "fast");
            });
    });
</script>
    <script type="text/javascript">
        var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = 'http://engine.adzerk.net/z/12057/adzerk2_2_17_76?keywords=x-host-codegolf.stackexchange.com'; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);
    </script>
    <div class="everyonelovesstackoverflow" id="adzerk2">
    </div>  

			  
    
            <div class="module sidebar-linked">
	<h4 id="h-linked">Linked</h4>
	<div class="linked" data-tracker="lq=1">
<div class="spacer">
	<a href="/q/1294" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes  default">32</div>
	</a>
	<a href="/questions/1294/anagram-code-golf" class="question-hyperlink">Anagram Code Golf!</a>
</div>			</div>
</div>


				<div class="module sidebar-related">
					<h4 id="h-related">Related</h4>
					<div class="related" data-tracker="rq=1">
						<div class="spacer">
<a href="/q/46" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">6
    </div>
</a><a href="/questions/46/fast-topswops-calculation" class="question-hyperlink">Fast Topswops calculation</a>
</div>
<div class="spacer">
<a href="/q/2698" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">7
    </div>
</a><a href="/questions/2698/a-blackjack-koth-contest" class="question-hyperlink">A BlackJack KOTH contest</a>
</div>
<div class="spacer">
<a href="/q/4772" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">5
    </div>
</a><a href="/questions/4772/random-sampling-without-replacement" class="question-hyperlink">Random sampling without replacement</a>
</div>
<div class="spacer">
<a href="/q/6868" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">7
    </div>
</a><a href="/questions/6868/generate-a-completely-deterministic-pseudorandom-bit-stream" class="question-hyperlink">Generate a (completely deterministic) pseudorandom bit stream</a>
</div>
<div class="spacer">
<a href="/q/8551" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">4
    </div>
</a><a href="/questions/8551/dice-from-changing-random-generator" class="question-hyperlink">Dice from Changing Random Generator</a>
</div>
<div class="spacer">
<a href="/q/8554" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">7
    </div>
</a><a href="/questions/8554/m3ph1st0ss-programming-puzzle-3-c-easy-bug" class="question-hyperlink">m3ph1st0s&#39;s programming puzzle 3 (C): “Easy bug”</a>
</div>
<div class="spacer">
<a href="/q/8862" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">8
    </div>
</a><a href="/questions/8862/output-a-shuffled-deck-using-random-input" class="question-hyperlink">Output a shuffled deck using random input</a>
</div>
<div class="spacer">
<a href="/q/8958" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">-3
    </div>
</a><a href="/questions/8958/swap-2-objects-without-using-a-temporary-variable" class="question-hyperlink">Swap 2 objects, without using a temporary variable</a>
</div>
<div class="spacer">
<a href="/q/10777" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">-2
    </div>
</a><a href="/questions/10777/write-a-program-to-print-squares-of-integers-up-to-25-in-java-without-using-vari" class="question-hyperlink">Write a program to print squares of integers up to 25 in java without using variables?</a>
</div>
<div class="spacer">
<a href="/q/12056" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">3
    </div>
</a><a href="/questions/12056/rubiks-revenge" class="question-hyperlink">Rubik&#39;s Revenge</a>
</div>

					</div>
				</div>
		</div>
	
<div id="feed-link">
    <div id="feed-link-text"><a href="/feeds/question/1663" title="feed of this question and its answers"><span class="feed-icon"></span>question feed</a></div>
</div>
	<script type="text/javascript">
StackExchange.ready(function(){$.get('/posts/1663/ivc/236d');});
</script>
<noscript>
    <div><img src="/posts/1663/ivc/236d" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang"></div></div>


        </div>
    </div>
    <div id="footer" class="categories">
        <div class="footerwrap">
            <div id="footer-menu">
                <div class="top-footer-links">
                        <a href="/about">about</a>
                    <a href="/help">help</a>
                        <a href="/help/badges">badges</a>
                    <a href="http://blog.stackexchange.com?blb=1">blog</a>
                        <a href="http://chat.stackexchange.com">chat</a>
                    <a href="http://data.stackexchange.com">data</a>
                    <a href="http://stackexchange.com/legal">legal</a>
                    <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a>
                    <a href="http://stackexchange.com/about/hiring">jobs</a>
                    <a href="http://stackexchange.com/about/contact">advertising info</a>

                    <a onclick='StackExchange.switchMobile("on", "/questions/1663/shuffle-a-deck-without-local-variables")'>mobile</a>
                    <b><a href="/contact">contact us</a></b>
                        <b><a href="http://meta.codegolf.stackexchange.com">feedback</a></b>
                    
                </div>
                <div id="footer-sites">
                    <table>
    <tr>
            <th colspan=3>
                Technology
            </th>
            <th >
                Life / Arts
            </th>
            <th >
                Culture / Recreation
            </th>
            <th >
                Science
            </th>
            <th >
                Other
            </th>
    </tr>
    <tr>
            <td>
                <ol>
                        <li><a href="http://stackoverflow.com" title="professional and enthusiast programmers">Stack Overflow</a></li>
                        <li><a href="http://serverfault.com" title="professional system and network administrators">Server Fault</a></li>
                        <li><a href="http://superuser.com" title="computer enthusiasts and power users">Super User</a></li>
                        <li><a href="http://webapps.stackexchange.com" title="power users of web applications">Web Applications</a></li>
                        <li><a href="http://askubuntu.com" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                        <li><a href="http://webmasters.stackexchange.com" title="pro webmasters">Webmasters</a></li>
                        <li><a href="http://gamedev.stackexchange.com" title="professional and independent game developers">Game Development</a></li>
                        <li><a href="http://tex.stackexchange.com" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://programmers.stackexchange.com" title="professional programmers interested in conceptual questions about software development">Programmers</a></li>
                        <li><a href="http://unix.stackexchange.com" title="users of Linux, FreeBSD and other Un*x-like operating systems.">Unix &amp; Linux</a></li>
                        <li><a href="http://apple.stackexchange.com" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                        <li><a href="http://wordpress.stackexchange.com" title="WordPress developers and administrators">WordPress Answers</a></li>
                        <li><a href="http://gis.stackexchange.com" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                        <li><a href="http://electronics.stackexchange.com" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                        <li><a href="http://android.stackexchange.com" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                        <li><a href="http://security.stackexchange.com" title="Information security professionals">Information Security</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://dba.stackexchange.com" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                        <li><a href="http://drupal.stackexchange.com" title="Drupal developers and administrators">Drupal Answers</a></li>
                        <li><a href="http://sharepoint.stackexchange.com" title="SharePoint enthusiasts">SharePoint</a></li>
                        <li><a href="http://ux.stackexchange.com" title="user experience researchers and experts">User Experience</a></li>
                        <li><a href="http://mathematica.stackexchange.com" title="users of Mathematica">Mathematica</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#technology" class="more">
                                more (14)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://photo.stackexchange.com" title="professional, enthusiast and amateur photographers">Photography</a></li>
                        <li><a href="http://scifi.stackexchange.com" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                        <li><a href="http://cooking.stackexchange.com" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                        <li><a href="http://diy.stackexchange.com" title="contractors and serious DIYers">Home Improvement</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#lifearts" class="more">
                                more (13)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://english.stackexchange.com" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                        <li><a href="http://skeptics.stackexchange.com" title="scientific skepticism">Skeptics</a></li>
                        <li><a href="http://judaism.stackexchange.com" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                        <li><a href="http://travel.stackexchange.com" title="road warriors and seasoned travelers">Travel</a></li>
                        <li><a href="http://christianity.stackexchange.com" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                        <li><a href="http://gaming.stackexchange.com" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                        <li><a href="http://bicycles.stackexchange.com" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                        <li><a href="http://rpg.stackexchange.com" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#culturerecreation" class="more">
                                more (21)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://math.stackexchange.com" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                        <li><a href="http://stats.stackexchange.com" title="statisticians, data analysts, data miners and data visualization experts">Cross Validated (stats)</a></li>
                        <li><a href="http://cstheory.stackexchange.com" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                        <li><a href="http://physics.stackexchange.com" title="active researchers, academics and students of physics">Physics</a></li>
                        <li><a href="http://mathoverflow.net" title="professional mathematicians">MathOverflow</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#science" class="more">
                                more (7)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://stackapps.com" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                        <li><a href="http://meta.stackoverflow.com" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Overflow</a></li>
                        <li><a href="http://area51.stackexchange.com" title="proposing new sites in the Stack Exchange network">Area 51</a></li>
                        <li><a href="http://careers.stackoverflow.com">Stack Overflow Careers</a></li>
                    
                </ol>
            </td>
    </tr>
</table>
                </div>
            </div>

            <div id="copyright">
                site design / logo &#169; 2013 stack exchange inc; user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc-wiki</a> 
 with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            <div id="footer-flair">
                <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="cc-wiki-link"></a>
            </div>
            <div id="svnrev">
                rev 2013.11.26.1178
            </div>
            
        </div>
    </div>
    <noscript>
        <div id="noscript-warning">Programming Puzzles &amp; Code Golf Stack Exchange works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript>

    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-24']);
        _gaq.push(['_setDomainName','.stackexchange.com']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|code-challenge|puzzle|random|']); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    var _comscore = _comscore || [];
    (function () {
        var ssl='https:'==document.location.protocol,
            s=document.getElementsByTagName('script')[0],
            ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src=(ssl?'https://ssl':'http://www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src=(ssl?'https://secure':'http://edge')+'.quantserve.com/quant.js';
        s.parentNode.insertBefore(sc, s);
        
        var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
        s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
        el.parentNode.insertBefore(s, el);
        
    })();
    _comscore.push({ c1: "2", c2: "17440561" });
    _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script>            
</body>
</html>
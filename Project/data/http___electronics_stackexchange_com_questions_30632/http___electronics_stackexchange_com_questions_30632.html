<!DOCTYPE html>
<html>
<head>
    
    <title>op amp - How many opamps does it take to find the peak amplitude of a signal? - Electrical Engineering Stack Exchange</title>
    <link rel="shortcut icon" href="//cdn.sstatic.net/electronics/img/favicon.ico">
    <link rel="apple-touch-icon image_src" href="//cdn.sstatic.net/electronics/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Electrical Engineering Stack Exchange" href="/opensearch.xml">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@StackElectronix" />
    <meta name="twitter:domain" content="electronics.stackexchange.com"/>
    <meta name="og:type" content="website" />
    <meta name="og:image" content="http://cdn.sstatic.net/electronics/img/apple-touch-icon@2.png?v=9f23bff8b9e4"/>
    <meta name="og:title" content="How many opamps does it take to find the peak amplitude of a signal?" />
    <meta name="og:description" content="I&#39;m a beginner with EE and trying to find the peak amplitude of an electric guitar signal (0-300mV) using an Arduino&#39;s 0-5v ADC. I&#39;m going to use the data to pulse lights in accordance with each st..." />
    <meta name="og:url" content="http://electronics.stackexchange.com/questions/30632/how-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal"/>
    <link rel="canonical" href="http://electronics.stackexchange.com/questions/30632/how-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal" />

    
    
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//cdn.sstatic.net/Js/stub.en.js?v=e3d47b73fa12" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.sstatic.net/electronics/all.css?v=92569be85963">
    
    <link rel="alternate" type="application/atom+xml" title="Feed for question &#39;How many opamps does it take to find the peak amplitude of a signal?&#39;" href="/feeds/question/30632">
    <script type="text/javascript">
        
        StackExchange.ready(function () {
            StackExchange.using("postValidation", function () {
                StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
            });

            
            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:3,shownCommentCount:3,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:30632});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('135', '30632');
            
                    });
    </script>

                <script type="text/x-mathjax-config">
                    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
                                        tex2jax: { inlineMath: [ ["\\$", "\\$"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
                                        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
                                        messageStyle: "none"
                });
                </script>
                <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>                

    <script type="text/javascript">
        StackExchange.ready(function () {
            StackExchange.realtime.init('wss://qa.sockets.stackexchange.com,ws://qa.sockets.stackexchange.com');
            StackExchange.realtime.subscribeToInboxNotifications();
                    StackExchange.realtime.subscribeToReputationNotifications('135');
                        });
    </script>
    <script type="text/javascript">
        StackExchange.init({"locale":"en","stackAuthUrl":"https://stackauth.com","serverTime":1385412303,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Electrical Engineering Stack Exchange","description":"Q&A for electronics and electrical engineering professionals, students, and enthusiasts","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdsB7sSAAAAAAzjgEF_Hd8vXv-C42sa_KyofaGR","enableSocialMediaInSharePopup":true},"user":{"fkey":"c2fcdba836c9d13e2116463b4c52ed93","isAnonymous":true}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.en.js":"e0bbd4760e83","js/moderator.en.js":"1a411fd265fe","js/full-anon.en.js":"fe5cdf2fdb00","js/full.en.js":"f103476d11b6","js/wmd.en.js":"bd9234d44a40","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/third-party/jquery.autocomplete.min.en.js":"","js/mobile.en.js":"d1d834ef85d2","js/help.en.js":"d3cc74d8a93a","js/tageditor.en.js":"6d51a5f8d7f3","js/tageditornew.en.js":"111b781cf314","js/inline-tag-editing.en.js":"f951bd09dc69","js/revisions.en.js":"33fd38144303","js/review.en.js":"f45b4ec094ea","js/tagsuggestions.en.js":"e4e7b952fcc7","js/post-validation.en.js":"c275fe37d674","js/explore-qlist.en.js":"73825bd006fc","js/events.en.js":"53bc48767091","js/mathjax-editing.en.js":"a09844f7b738","js/external-editor.en.js":"b3abe8227765"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
        
    </script>
    
        <script type="text/javascript">
            StackExchange.ready(function () {
                $('#nav-tour').click(function () {
                    StackExchange.using("gps", function() {
                        StackExchange.gps.track("aboutpage.click", { aboutclick_location: "headermain" }, true);
                    });
                });
            });
        </script>
</head>
<body class="question-page">
    <noscript><div id="noscript-padding"></div></noscript>
    <div id="notify-container"></div>
    <div id="overlay-header"></div>
    <div id="custom-header"></div>
    <div class="container">
        <div id="header" class=headeranon>
            <div id="portalLink">
                <a class="genu" href="http://stackexchange.com" onclick="StackExchange.ready(function(){genuwine.click();});return false;">Stack Exchange</a>
            </div>
            <div id="topbar">
                <div id="hlinks">
                    
<span id="hlinks-user"></span>
<span id="hlinks-nav">                        <a href="/users/login?returnurl=%2fquestions%2f30632%2fhow-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal">sign up</a>

 <span class="lsep">|</span>
                    <a href="/users/login?returnurl=%2fquestions%2f30632%2fhow-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal">log in</a>

 <span class="lsep">|</span>
</span>
<span id="hlinks-custom"></span>
                </div>
                <div id="hsearch">
                    <form id="search" action="/search" method="get" autocomplete="off">
                        <div>
                            <input autocomplete="off" name="q" class="textbox" placeholder="search" tabindex="1" type="text" maxlength="240" size="28" value="">
                        </div>
                    </form>
                </div>
            </div>
            <br class="cbt">
            <div id="hlogo">
                <a href="/">
                    Electrical Engineering
                </a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs mainnavsanon">
                    <ul>
                            <li class="youarehere"><a id="nav-questions" href="/questions">Questions</a></li>
                            <li><a id="nav-tags" href="/tags">Tags</a></li>
                            <li><a id="nav-tour" href="/about">Tour</a></li>
                            <li><a id="nav-users" href="/users">Users</a></li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion"  href="/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        



        <div id="content">
            

<div itemscope itemtype="http://schema.org/Article">
	<link itemprop="image" href="//cdn.sstatic.net/electronics/img/apple-touch-icon.png">
			<!--googleoff: all-->
<div id="herobox-mini">
    <div id="hero-content">
        <span id="controls">
            <a href="/about" id="tell-me-more" class="button">Tell me more</a>
            <span id="close"><a title="click to dismiss">&times;</a></span>
        </span>
        <div id="blurb">
            Electrical Engineering Stack Exchange is a question and answer site for electronics and electrical engineering professionals, students, and enthusiasts. It&#39;s 100% free, no registration required.
        </div>        
    </div>
    <script>
        $('#tell-me-more').click(function () {
            var clickSource = $("body").attr("class") + '-mini';
            if ($("body").hasClass("questions-page")) {
                clickSource = 'questionpagemini';
            }
            if ($("body").hasClass("home-page")) {
                clickSource = 'homepagemini';
            }

            StackExchange.using("gps", function () {
                StackExchange.gps.track("aboutpage.click", { aboutclick_location: clickSource } , true);
            });
        });
        $('#herobox-mini #close').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: "close" }, true);
            });
            $.cookie("hero", "none", { path: "/" });
            var $hero = $("#herobox-mini");
            $hero.slideUp('fast', function () { $hero.remove(); });
            return false;
        });
    </script>
</div>
			<!--googleon: all-->
			<div id="question-header">
			<h1 itemprop="name"><a href="/questions/30632/how-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal" class="question-hyperlink">How many opamps does it take to find the peak amplitude of a signal?</a></h1>
		</div>
			<div id="mainbar">

			

<div class="question" data-questionid="30632"  id="question">
    
        <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="30632">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear">up vote</a>
    <span class="vote-count-post ">3</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful">down vote</a>
    
    <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b>1</b></div>   

</div>

            </td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="description">

        <p>I'm a beginner with EE and trying to find the peak <strong>amplitude</strong> of an electric guitar signal (0-300mV) using an Arduino's 0-5v ADC. I'm going to use the data to pulse lights in accordance with each strum of the guitar.</p>

<p>I've figured out so far that I need to use op-amps to:</p>

<ol>
<li>Rectify the 0-300mv AC signal (full or half wave)</li>
<li>Amplify the signal to 0-5v</li>
<li>Use a voltage peak finder to locate the peak</li>
<li>Use a buffer to protect against impedance (not sure if I need this?)</li>
</ol>

<p>I've found circuits that use op-amps to do all of these, and they work fine, however they are all independent of each other.</p>

<p><strong>My Question:</strong> is how do I combine all of these together into one circuit and how many op-amps should I really need.  My approach initially was just to daisy chain everything, but I'm not sure that's the correct approach. Also, most of these use a buffer op-amp as the last step, do I really need one if I'm sending the signal into an ADC?</p>

    </div>
    <div class="post-taglist">
        <a href="/questions/tagged/op-amp" class="post-tag" title="show questions tagged &#39;op-amp&#39;" rel="tag">op-amp</a> 
    </div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/q/30632" title="short permalink to this question" class="short-link" id="link-post-30632">share</a><span class="lsep">|</span><a href="/posts/30632/edit" class="suggest-edit-post" title="">improve this question</a></div>        
    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/30632/revisions" title="show all edits to this post">edited <span title="2012-04-24 23:17:11Z" class="relativetime">Apr 24 '12 at 23:17</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
    <td class="post-signature owner">
        
<div class="user-info ">
    <div class="user-action-time">
        
        
            asked <span title="2012-04-24 18:59:24Z" class="relativetime">Apr 24 '12 at 18:59</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/9431/uberdanzik"><div><img src="https://www.gravatar.com/avatar/9d01ae75710ecc854f6b593ef83cd185?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/9431/uberdanzik">uberdanzik</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">159</span><span title="5 bronze badges"><span class="badge3"></span><span class="badgecount">5</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</div>
</td>
        </tr>
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-30632" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-57990" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">If you always amplify the signal to 0-5 V, then find the peak, won&#39;t the peak amplitude always be 5 V?</span>
	&ndash;&nbsp;
		<a href="/users/6334/the-photon" 
		   title="21694 reputation" 
		   class="comment-user">The Photon</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 19:26:14Z" class="relativetime-clean">Apr 24 '12 at 19:26</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-57994" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">It will vary based on how hard you strum the guitar. After rectification some quiet guitar picking could be 0-50mv, but if you strum hard the peaks can get up to 300mv. So I&#39;m saying the possible max would change from 300mv to 5v after amplification.</span>
	&ndash;&nbsp;
		<a href="/users/9431/uberdanzik" 
		   title="159 reputation" 
		   class="comment-user owner">uberdanzik</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 19:55:36Z" class="relativetime-clean">Apr 24 '12 at 19:55</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58003" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">one... tu-whooo... (crunch) three... the world may never know.</span>
	&ndash;&nbsp;
		<a href="/users/330/jason-s" 
		   title="9729 reputation" 
		   class="comment-user">Jason S</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 20:35:54Z" class="relativetime-clean">Apr 24 '12 at 20:35</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-30632" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments." 
				>add comment</a>
    </td>
</tr>            </table>    
</div>


			<div id="answers">

				<a name="tab-top"></a>
				<div id="answers-header">
					<div class="subheader answers-subheader">
						<h2>
								5 Answers
						</h2>
						<div>
							<div id="tabs">
        <a href="/questions/30632/how-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal?answertab=active#tab-top" title="Answers with the latest activity first">active</a>
        <a href="/questions/30632/how-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a>
        <a class="youarehere" href="/questions/30632/how-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal?answertab=votes#tab-top" title="Answers with the highest score first">votes</a>
</div>
						</div>
					</div>    
				</div>    




  
<a name="30638"></a>
<div id="answer-30638" class="answer" data-answerid="30638" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="30638">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>I think you can do all of this with just two op-amps (although someone will probably correct me).</p>

<p><img src="http://i.stack.imgur.com/aDdaH.png" alt="Opamps for guitar"></p>

<p>The first stage is the peak detector and decay. The op-amp is wired to emulate a perfect diode. We take the feedback signal from after the diode so that the op-amp drives hard enough to overcome the voltage drop of the diode. Being a peak detector, it doesn't really eed a rectified signal. The capacitor holds the peak value, while the resistor decays it. You can make the decay slower by choosing a larger capacitor and resistor. And vice versa.</p>

<p>The second stage is simply 15x gain. It has low output impedance.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/30638" title="short permalink to this answer" class="short-link" id="link-post-30638">share</a><span class="lsep">|</span><a href="/posts/30638/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/30638/revisions" title="show all edits to this post">edited <span title="2012-04-24 21:39:01Z" class="relativetime">Apr 24 '12 at 21:39</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2012-04-24 20:21:52Z" class="relativetime">Apr 24 '12 at 20:21</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/1024/rocketmagnet"><div><img src="https://www.gravatar.com/avatar/1d142fd41ea0a8b989f8a005e6532845?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1024/rocketmagnet">Rocketmagnet</a><br>
        <span class="reputation-score" title="reputation score 15195" dir="ltr">15.2k</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="21 silver badges"><span class="badge2"></span><span class="badgecount">21</span></span><span title="61 bronze badges"><span class="badge3"></span><span class="badgecount">61</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-30638" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="9" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-57999" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">That scheme is wrong if I&#39;m right, because when the signal is inverted the first opamp will saturate...do you agree?</span>
	&ndash;&nbsp;
		<a href="/users/7348/clabacchio" 
		   title="7999 reputation" 
		   class="comment-user">clabacchio<span class="mod-flair" title="moderator">&#9830;</span></a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 20:23:22Z" class="relativetime-clean">Apr 24 '12 at 20:23</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58021" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">This is wrong.  You are not amplifying the peak detected signal.</span>
	&ndash;&nbsp;
		<a href="/users/4512/olin-lathrop" 
		   title="92586 reputation" 
		   class="comment-user">Olin Lathrop</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 21:29:05Z" class="relativetime-clean">Apr 24 '12 at 21:29</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58033" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Rocket: Better now.  Downvote removed.</span>
	&ndash;&nbsp;
		<a href="/users/4512/olin-lathrop" 
		   title="92586 reputation" 
		   class="comment-user">Olin Lathrop</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 21:42:04Z" class="relativetime-clean">Apr 24 '12 at 21:42</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58060" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Telaclavo: You&#39;re right, I apologize for that. I&#39;ve changed the title now to reflect I was looking for the peak.</span>
	&ndash;&nbsp;
		<a href="/users/9431/uberdanzik" 
		   title="159 reputation" 
		   class="comment-user owner">uberdanzik</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 23:19:30Z" class="relativetime-clean">Apr 24 '12 at 23:19</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58207" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">the nitpicker adds: this circuit finds the peak <i>positive</i> amplitude of the signal; signals with 2nd harmonics will have their negative halves ignored.</span>
	&ndash;&nbsp;
		<a href="/users/330/jason-s" 
		   title="9729 reputation" 
		   class="comment-user">Jason S</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-25 16:05:23Z" class="relativetime-clean">Apr 25 '12 at 16:05</span></span>
		<span class="edited-yes" title="this comment was edited 2 times"></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-30638" data-rep=50 data-anon=true
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>show <b>9</b> more comments</a>
    </td>
</tr>
    </table>
</div>

  
<a name="30637"></a>
<div id="answer-30637" class="answer" data-answerid="30637" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="30637">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>Take a look at <a href="http://electronics.stackexchange.com/questions/28807/op-amp-rectifier-transfer-function-and-output-impedance/28812#28812">this</a>: it's a rectifier, that you can use both to find the envelop of the curve, and to amplify it.</p>

<p><img src="http://i.stack.imgur.com/z9WTI.jpg" alt="enter image description here"></p>

<p>You have to set the resistors such as the gain is the desired one (you can use a pot to set it), and the capacitor to minimize the ripple. Note that the RC constant will determine the responsivity of the circuit, so you'll have to find the optimal value for you. </p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/30637" title="short permalink to this answer" class="short-link" id="link-post-30637">share</a><span class="lsep">|</span><a href="/posts/30637/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2012-04-24 20:21:26Z" class="relativetime">Apr 24 '12 at 20:21</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/7348/clabacchio"><div><img src="https://www.gravatar.com/avatar/a3e1c53c6b524c60b4d02ec8910fff82?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/7348/clabacchio">clabacchio</a><span class="mod-flair" title="moderator">&#9830;</span><br>
        <span class="reputation-score" title="reputation score " dir="ltr">7,999</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="14 silver badges"><span class="badge2"></span><span class="badgecount">14</span></span><span title="39 bronze badges"><span class="badge3"></span><span class="badgecount">39</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-30637" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="1" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-57998" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Damn, you did it in one. Shoulda been obvious.</span>
	&ndash;&nbsp;
		<a href="/users/1024/rocketmagnet" 
		   title="15195 reputation" 
		   class="comment-user">Rocketmagnet</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 20:23:08Z" class="relativetime-clean">Apr 24 '12 at 20:23</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58000" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Rocketmagnet I didn&#39;t :) I shamelessly took the schematic from another question :)</span>
	&ndash;&nbsp;
		<a href="/users/7348/clabacchio" 
		   title="7999 reputation" 
		   class="comment-user">clabacchio<span class="mod-flair" title="moderator">&#9830;</span></a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 20:24:03Z" class="relativetime-clean">Apr 24 '12 at 20:24</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58015" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Your output RC constant will largely depend on something external to the circuit (as is the input resistance of the ADC input). Also, the maximum gain for that is 11, and the OP needs 16.8.</span>
	&ndash;&nbsp;
		<a href="/users/9137/telaclavo" 
		   title="3628 reputation" 
		   class="comment-user">Telaclavo</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 21:08:40Z" class="relativetime-clean">Apr 24 '12 at 21:08</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58040" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Telaclavo but I&#39;ve specified that he can change the components to fit his needs, this schematic is taken from another question. And the RC constant will be quite fine if he feeds the signal to the ADC</span>
	&ndash;&nbsp;
		<a href="/users/7348/clabacchio" 
		   title="7999 reputation" 
		   class="comment-user">clabacchio<span class="mod-flair" title="moderator">&#9830;</span></a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 21:51:02Z" class="relativetime-clean">Apr 24 '12 at 21:51</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58094" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Everything there that the OP asked for, except a buffer. And if his ADC needs little enough input current that the error caused by its draining the capacitor is okay, then he doesn&#39;t really need the buffer.</span>
	&ndash;&nbsp;
		<a href="/users/6334/the-photon" 
		   title="21694 reputation" 
		   class="comment-user">The Photon</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-25 05:09:50Z" class="relativetime-clean">Apr 25 '12 at 5:09</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-30637" data-rep=50 data-anon=true
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>show <b>1</b> more comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="30639"></a>
<div id="answer-30639" class="answer" data-answerid="30639" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="30639">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>Since you just want to turn on and off LEDs, and don't need hi-fidelity, this should work for you. The opamp amplifies only the positive range of your input signal, and therefore <strong>it does the rectification without needing any diode</strong> and, at the same time, it provides a voltage gain. The opamp will go into and out of saturation constantly, with the corresponding penalty in its frequency response but, I repeat, since you don't need hi-fi, this shouldn't be any problem.</p>

<p>R1 = 4.7 kohm (to limit input current when Vin is negative)</p>

<p>R2 = 9310 ohm</p>

<p>R3 = 590 ohm (gain will be the 5/0.3=16.8 that you need)</p>

<p>R4 = 1 kohm</p>

<p>C1 = 47 uF (R4 and C1 will low pass filter at fc=3.4 Hz, good for a vu-meter)</p>

<p>C2 = 1 uF 0805</p>

<p>U1 = <a href="http://uk.farnell.com/analog-devices/ad8615aujz/op-amp-precision-rri-o-smd-8615/dp/9079408" rel="nofollow">AD8615AUJZ</a> (with rail-to-rail input and output)</p>

<p>Notice that this circuit does not perform peak detection. Vout is the average of the positive cycles of Vin. That is proportional to the <em>average amplitude</em> of the input signal, which is what the OP wanted. So, in fact, Vout will be at most 2.5 V for full-scale, 50% duty ratio square wave input, but linearity will be better than with a peak detector, because that is nonlinear. The reduced Vout range can be easily compensated:</p>

<p>a) In software.</p>

<p>b) In hardware, applying 2.5 V to the VREF input of the Arduino.</p>

<p><img src="http://i.stack.imgur.com/LHHHN.png" alt="Schematic"></p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/30639" title="short permalink to this answer" class="short-link" id="link-post-30639">share</a><span class="lsep">|</span><a href="/posts/30639/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/30639/revisions" title="show all edits to this post">edited <span title="2012-04-24 21:02:02Z" class="relativetime">Apr 24 '12 at 21:02</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info user-hover">
    <div class="user-action-time">
        
        
            answered <span title="2012-04-24 20:30:04Z" class="relativetime">Apr 24 '12 at 20:30</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/9137/telaclavo"><div><img src="https://www.gravatar.com/avatar/f70205d3c52a99cea63522b7ad48b0de?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/9137/telaclavo">Telaclavo</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">3,628</span><span title="4 silver badges"><span class="badge2"></span><span class="badgecount">4</span></span><span title="17 bronze badges"><span class="badge3"></span><span class="badgecount">17</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-30639" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-58006" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">With that circuit the range goes also to 5 V. And eventually he can use the LED itself as rectifying element</span>
	&ndash;&nbsp;
		<a href="/users/7348/clabacchio" 
		   title="7999 reputation" 
		   class="comment-user">clabacchio<span class="mod-flair" title="moderator">&#9830;</span></a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 20:47:02Z" class="relativetime-clean">Apr 24 '12 at 20:47</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58008" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@clabacchio No, Vout goes to an analog input of an Arduino, he said.</span>
	&ndash;&nbsp;
		<a href="/users/9137/telaclavo" 
		   title="3628 reputation" 
		   class="comment-user">Telaclavo</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 20:47:49Z" class="relativetime-clean">Apr 24 '12 at 20:47</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58029" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">I do need high fidelity. These LEDs will be pulsing/fading to the guitar&#39;s dynamic activity like a light show. Hard strum / light strum should equal Bright pulse / Dim pulse.</span>
	&ndash;&nbsp;
		<a href="/users/9431/uberdanzik" 
		   title="159 reputation" 
		   class="comment-user owner">uberdanzik</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 21:36:17Z" class="relativetime-clean">Apr 24 '12 at 21:36</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58055" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@uberdanzik 1) Clearly, you don&#39;t know what hi-fidelity means. Hi-fidelity means something like &lt;= 0.01% THD which, I repeat, makes no sense to drive vu-meter LEDs. 2) This circuit is the most linear of the 3 answers that I see here. 3) You wrote &quot;trying to find the <b>average</b> amplitude&quot;, but then selected a circuit that gives you the <b>peak</b> amplitude, so you don&#39;t know the difference between them, either. 4) You shouldn&#39;t write &quot;How many opamps does it take...&quot;, if you later select a solution that does not use the minimum possible number of opamps. Anyway, good to know, for the future.</span>
	&ndash;&nbsp;
		<a href="/users/9137/telaclavo" 
		   title="3628 reputation" 
		   class="comment-user">Telaclavo</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-24 22:56:43Z" class="relativetime-clean">Apr 24 '12 at 22:56</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-58097" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@Telaclavo you&#39;re right about high-fidelity, but I&#39;m quite sure that for &quot;average amplitude&quot; he means the envelope of the curve, which basically can be obtained with a fast peak detector</span>
	&ndash;&nbsp;
		<a href="/users/7348/clabacchio" 
		   title="7999 reputation" 
		   class="comment-user">clabacchio<span class="mod-flair" title="moderator">&#9830;</span></a>
	<span class="comment-date" dir="ltr"><span title="2012-04-25 06:08:18Z" class="relativetime-clean">Apr 25 '12 at 6:08</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-30639" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="30650"></a>
<div id="answer-30650" class="answer" data-answerid="30650" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="30650">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>Here's another precision full wave rectifier. <a href="http://sound.westhost.com/appnotes/an001-f9.gif" rel="nofollow">Full wave amp</a></p>

<p>Personally you can do alot of signal conditioning with HEX CMOS inverters with each buffer having an open loop gain of 1000. A log amp is useful if you want to regulate Light intensity with log of input amplitude similar to hearing response.
You can use a State Variable Filter to create bandpass, low pass and high pass for 3 channel or use a chain of gyrator BP filters with quad OA's and make one light per note or one per octave. Again it all depends what you want to do.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/30650" title="short permalink to this answer" class="short-link" id="link-post-30650">share</a><span class="lsep">|</span><a href="/posts/30650/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2012-04-25 00:16:24Z" class="relativetime">Apr 25 '12 at 0:16</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/17574/tony-stewart"><div><img src="https://www.gravatar.com/avatar/66c840daf3335de84d992d6f33a7f668?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/17574/tony-stewart">Tony Stewart</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1</span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-30650" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-58209" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">+1 -- this circuit detects both positive and negative peaks of waveforms.</span>
	&ndash;&nbsp;
		<a href="/users/330/jason-s" 
		   title="9729 reputation" 
		   class="comment-user">Jason S</a>
	<span class="comment-date" dir="ltr"><span title="2012-04-25 16:08:07Z" class="relativetime-clean">Apr 25 '12 at 16:08</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-30650" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>

  
<a name="30648"></a>
<div id="answer-30648" class="answer" data-answerid="30648" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="30648">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">-2</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p><a href="http://www.google.ca/search?client=safari&amp;rls=en&amp;q=light%20organ%20schematic&amp;ie=UTF-8&amp;oe=UTF-8&amp;redir_esc=&amp;ei=5zeXT86zGMqBgAeus7z7DQ" rel="nofollow">In the 60's we used filters , triacs and lights to sound .. Light organ .. million ways depending what you want to do</a></p>

<p>Wasn't trying to be trite, but the question is fallacious and assumes incorrectly that you need Op Amps to detect the peak amplitude. @uberdanzik  For example 2 transistors in emitter follower NPN then PNP with Caps on emitter will detect peak without offset and buffer it. I hope you understand.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">











<div class="post-menu"><a href="/a/30648" title="short permalink to this answer" class="short-link" id="link-post-30648">share</a><span class="lsep">|</span><a href="/posts/30648/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">

<div class="user-info ">
    <div class="user-action-time">
        
        
        <a href="/posts/30648/revisions" title="show all edits to this post">edited <span title="2012-04-25 15:06:51Z" class="relativetime">Apr 25 '12 at 15:06</span></a>
        

    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    
<div class="user-info ">
    <div class="user-action-time">
        
        
            answered <span title="2012-04-24 23:38:51Z" class="relativetime">Apr 24 '12 at 23:38</span>
        

    </div>
    <div class="user-gravatar32">
        <a href="/users/17574/tony-stewart"><div><img src="https://www.gravatar.com/avatar/66c840daf3335de84d992d6f33a7f668?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/17574/tony-stewart">Tony Stewart</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1</span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-30648" class="comments dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">
					    <tr><td></td><td></td></tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-30648" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>
									<a name='new-answer'></a>
						<form id="post-form" action="/questions/30632/answer/submit" method="post"  class="post-form">
							<input type="hidden" id="post-id" value="30632" />
							<h2 class="space">Your Answer</h2>


        <script type="text/javascript">
            StackExchange.ifUsing("editor", function () {
                return StackExchange.using("mathjaxEditing", function () {
                    StackExchange.MarkdownEditor.creationCallbacks.add(function (editor, postfix) {
                        StackExchange.mathjaxEditing.prepareWmdForMathJax(editor, postfix, [["\\$", "\\$"]]);
                    });
                });
            }, "mathjax-editing");
        </script>

            <script type="text/javascript">
            StackExchange.ifUsing("editor", function () {
                return StackExchange.using("schematics", function () {
                    StackExchange.schematics.init();
                });
            }, "cicuitlab");
        </script>


<script type="text/javascript">
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });
        

    });  
</script>


<div id="post-editor" class="post-editor">

    <div style="position: relative;">     
        <div class="wmd-container">
            <div id="wmd-button-bar" class="wmd-button-bar"></div>
            <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101" data-min-length=""></textarea>
        </div>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>



    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="c2fcdba836c9d13e2116463b4c52ed93">
        <input id="author" name="author" type="text">
    </div>
</div>
							<div style="position: relative;">
								
            <div class="form-item dno new-post-login">
        
                <div class="new-login-form">
                    <div class="new-login-left">
                        <h3>Sign up or <a id="login-link" href="/users/login?returnurl=%2fquestions%2f30632%2fhow-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal%23new-answer">login</a></h3>
                        <script type="text/javascript">
                            StackExchange.ready(function () {
                                StackExchange.helpers.onClickDraftSave('#login-link');
                            });
                        </script>
                        <div class="preferred-login google-login">
                            <p><span class="icon"></span><span>Sign up using Google</span></p>
                        </div>
                        <div class="preferred-login facebook-login">
                            <p><span class="icon"></span><span>Sign up using Facebook</span></p>
                        </div>
                        <div class="preferred-login stackexchange-login">
                            <p><span class="icon"></span><span>Sign up using Stack Exchange</span></p>
                        </div>
                    </div>
                    <input type="hidden" name="manual-openid" class="manual-openid" />
                    <input type="hidden" name="use-facebook" class="use-facebook" value="false" />
                    <input type="button" class="submit-openid" value="Submit" style="display:none" />
                    <div class="new-login-right">
                                <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

                    </div>
                </div>
            </div>
            <script type="text/javascript">
                StackExchange.ready(
                    function () {
                        StackExchange.openid.initPostLogin('.new-post-login', '%2fquestions%2f30632%2fhow-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal%23new-answer');
                    }
                );
            </script>
            <noscript>
                        <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

            </noscript>
							</div>
           
															<div class="form-submit cbt">
									<input id="submit-button" type="submit" value="Post Your Answer" tabindex="110">
									<a href="#" class="discard-answer dno">discard</a>

<p class="privacy-policy-agreement">
By posting your answer, you agree to the <a href='http://stackexchange.com/legal/privacy-policy' target='_blank'>privacy policy</a> and <a href='http://stackexchange.com/legal/terms-of-service' target='_blank'>terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1" />								</div>
						</form>



						<h2 class="bottom-notice">
Not the answer you&#39;re looking for?							Browse other questions tagged <a href="/questions/tagged/op-amp" class="post-tag" title="show questions tagged &#39;op-amp&#39;" rel="tag">op-amp</a>  or <a href="/questions/ask">ask your own question</a>.						</h2>
			</div>
		</div>
				<div id="sidebar" class="show-votes">
							<div class="module question-stats">
					<p class="label-key">tagged</p>
					<div class="tagged"><a href="/questions/tagged/op-amp" class="post-tag" title="show questions tagged &#39;op-amp&#39;" rel="tag">op-amp</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">525</span></span><br>
</div>
					<table id="qinfo">
						<tr>
							<td>
								<p class="label-key">asked</p>
							</td>
							<td style="padding-left: 10px">
								<p class="label-key" title="2012-04-24 18:59:24Z"><b>1 year ago</b></p>
							</td>
						</tr>
						<tr>
							<td>
								<p class="label-key">viewed</p>
							</td>

							<td style="padding-left: 10px">
								<p class="label-key">
									<b>744 times</b>
								</p>
							</td>
						</tr>
							<tr>
								<td>
									<p class="label-key">active</p>
								</td>
								<td style="padding-left: 10px">
									<p class="label-key"><b><a href="?lastactivity" class="lastactivity-link" title="2012-04-25 15:06:51Z">1 year ago</a></b></p>
								</td>
							</tr>
					</table>
				</div>
						
			

<style type="text/css">
    .ads { margin-left: 60px; }
    .ad-container { width: 220px; height: 250px; margin-right: 20px; margin-bottom: 20px; }
    .ad-container .ad { height: 250px; }
    .ad-container .footer-container { overflow: hidden; height: 30px; position: relative; top: -30px; }
    .ad-container .footer-container .footer { font-family: Arial,Helvetic,Sans-Serif; font-size: 12px; text-align: center; padding-top: 9px; background-color: #000; color: #EFF; opacity: 0.9; filter: alpha(opacity=90); top: 30px; height: 30px; position: relative; }
    .ad-container a:hover { text-decoration: underline; }
    #adzerk2 { height: 250px; }
</style>
<script type="text/javascript">
    StackExchange.ready(function () {
        $(".ad-container").hover(
            function () {
                $(".ad-container .footer-container .footer").stop(true, true).animate({ top: "0px" }, "fast");
            },
            function () {
                $(".ad-container .footer-container .footer").animate({ top: "30px" }, "fast");
            });
    });
</script>
    <div class="ad-container">    
        <div class="ad">    
        <a href="http://meta.electronics.stackexchange.com/ads/ct/3044?url=http%3a%2f%2fraspberrypi.stackexchange.com" rel="nofollow" target="_blank"><img src="http://i.stack.imgur.com/6whQp.png" alt="Raspberry Pi Stack Exchange" title="Raspberry Pi Stack Exchange" width="220" height="250"></a>
        </div>
        <div class="footer-container">
            <div class="footer">
                7 votes · <a href="http://meta.electronics.stackexchange.com/questions/2515#3044" title="click to comment on this ad" target="_blank">comment</a> · <a href="http://meta.electronics.stackexchange.com/ads/display/2515" target="_blank">stats</a>
            </div>
        </div>
    </div>
    <div style="margin-bottom: 10px;">
        

<style type="text/css">
#newsletter-ad {
    width: 190px;
    height: 250px;
    overflow: hidden;
    background: url('//cdn.sstatic.net/electronics/img/newsletter-ad.png');
    padding: 0 15px 0 15px;
}
#newsletter-ad-header {
    margin-top: 60px;
}
#newsletter-ad ul {
    margin: 1em 0 1em 1.5em;
}
#newsletter-ad ul li {
    margin-bottom: 5px;
}
#newsletter-signup-container {
    text-align: center;
}
#newsletter-preview-container {
    margin-top: 10px;
    text-align: center;
}
#newsletter-email-input {
    width: 200px;
}
</style>

<script>
    StackExchange.ready(function () {
        StackExchange.newsletterAd.init();
    });
</script>

<div id="newsletter-ad">
    <p id="newsletter-ad-header">Get the <b>weekly newsletter!</b></p>
    <ul>
        <li>Top questions and answers</li>
        <li>Important announcements</li>
        <li>Unanswered questions</li>
    </ul>
    <div id="newsletter-signup-container"><input id="newsletter-signup" type="button" value="Sign up for the newsletter" /></div>
    <p id="newsletter-preview-container">see an <a href="http://stackexchange.com/newsletters/newsletter?site=electronics.stackexchange.com" id="newsletter-preview">example newsletter</a></p>
    <div class="dno">
        
<p class="privacy-policy-agreement">
By subscribing, you agree to the <a href='http://stackexchange.com/legal/privacy-policy' target='_blank'>privacy policy</a> and <a href='http://stackexchange.com/legal/terms-of-service' target='_blank'>terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1" />
    </div>
</div>

    </div>


			  
    
            <div class="module sidebar-linked">
	<h4 id="h-linked">Linked</h4>
	<div class="linked" data-tracker="lq=1">
<div class="spacer">
	<a href="/q/28807" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes  default">5</div>
	</a>
	<a href="/questions/28807/op-amp-rectifier-transfer-function-and-output-impedance" class="question-hyperlink">Op amp rectifier : transfer function and output impedance</a>
</div><div class="spacer">
	<a href="/q/36757" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">2</div>
	</a>
	<a href="/questions/36757/adding-decay-fall-off-to-comparator-circuit" class="question-hyperlink">Adding decay (fall-off) to comparator circuit</a>
</div>			</div>
</div>


				<div class="module sidebar-related">
					<h4 id="h-related">Related</h4>
					<div class="related" data-tracker="rq=1">
						<div class="spacer">
<a href="/q/3212" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">-1
    </div>
</a><a href="/questions/3212/can-i-use-an-op-amp-in-buffer-configuration-as-a-voltage-source" class="question-hyperlink">Can I use an op-amp in buffer configuration as a voltage source?</a>
</div>
<div class="spacer">
<a href="/q/20523" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">3
    </div>
</a><a href="/questions/20523/how-do-i-condition-a-signal-with-an-op-amp-that-needs-a-negative-rail-where-one" class="question-hyperlink">How do I condition a signal with an op-amp that needs a negative rail where one is not provided?</a>
</div>
<div class="spacer">
<a href="/q/25108" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">3
    </div>
</a><a href="/questions/25108/how-does-this-op-amp-offset-voltage-measuring-circuit-work" class="question-hyperlink">How does this OP-AMP offset voltage measuring circuit work?</a>
</div>
<div class="spacer">
<a href="/q/26979" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">1
    </div>
</a><a href="/questions/26979/how-does-this-op-amp-non-inverting-amplifier-work" class="question-hyperlink">How does this OP-AMP non-inverting amplifier work?</a>
</div>
<div class="spacer">
<a href="/q/33814" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">4
    </div>
</a><a href="/questions/33814/voltage-on-opamp-input-is-not-right-how-come" class="question-hyperlink">Voltage on opamp input is not right - how come?</a>
</div>
<div class="spacer">
<a href="/q/56591" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">0
    </div>
</a><a href="/questions/56591/op-amp-level-shift" class="question-hyperlink">Op amp level shift?</a>
</div>
<div class="spacer">
<a href="/q/57159" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">2
    </div>
</a><a href="/questions/57159/how-can-you-guarantee-stability-of-an-inverting-opamp-configuration-amplifier" class="question-hyperlink">How can you guarantee stability of an inverting opamp configuration amplifier?</a>
</div>
<div class="spacer">
<a href="/q/59204" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">-1
    </div>
</a><a href="/questions/59204/how-do-you-visualize-an-opamp-how-does-the-current-flow-what-is-really-happeni" class="question-hyperlink">How do you visualize an opamp? How does the current flow? What is really happening? What&#39;s behind this so called infinite gain?</a>
</div>
<div class="spacer">
<a href="/q/83229" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">5
    </div>
</a><a href="/questions/83229/is-3k-ohm-too-high-impedance-to-an-op-amp-differential-amplifier" class="question-hyperlink">Is 3k ohm too high impedance to an op amp differential amplifier?</a>
</div>
<div class="spacer">
<a href="/q/86057" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">1
    </div>
</a><a href="/questions/86057/signal-conditioning-using-opamp-need-help" class="question-hyperlink">Signal Conditioning using Opamp -Need Help</a>
</div>

					</div>
				</div>
		</div>
	
<div id="feed-link">
    <div id="feed-link-text"><a href="/feeds/question/30632" title="feed of this question and its answers"><span class="feed-icon"></span>question feed</a></div>
</div>
	<script type="text/javascript">
StackExchange.ready(function(){$.get('/posts/30632/ivc/b42f');});
</script>
<noscript>
    <div><img src="/posts/30632/ivc/b42f" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang"></div></div>


        </div>
    </div>
    <div id="footer" class="categories">
        <div class="footerwrap">
            <div id="footer-menu">
                <div class="top-footer-links">
                        <a href="/about">about</a>
                    <a href="/help">help</a>
                        <a href="/help/badges">badges</a>
                    <a href="http://blog.stackexchange.com?blb=1">blog</a>
                        <a href="http://chat.stackexchange.com">chat</a>
                    <a href="http://data.stackexchange.com">data</a>
                    <a href="http://stackexchange.com/legal">legal</a>
                    <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a>
                    <a href="http://stackexchange.com/about/hiring">jobs</a>
                    <a href="http://stackexchange.com/about/contact">advertising info</a>

                    <a onclick='StackExchange.switchMobile("on", "/questions/30632/how-many-opamps-does-it-take-to-find-the-peak-amplitude-of-a-signal")'>mobile</a>
                    <b><a href="/contact">contact us</a></b>
                        <b><a href="http://meta.electronics.stackexchange.com">feedback</a></b>
                    
                </div>
                <div id="footer-sites">
                    <table>
    <tr>
            <th colspan=3>
                Technology
            </th>
            <th >
                Life / Arts
            </th>
            <th >
                Culture / Recreation
            </th>
            <th >
                Science
            </th>
            <th >
                Other
            </th>
    </tr>
    <tr>
            <td>
                <ol>
                        <li><a href="http://stackoverflow.com" title="professional and enthusiast programmers">Stack Overflow</a></li>
                        <li><a href="http://serverfault.com" title="professional system and network administrators">Server Fault</a></li>
                        <li><a href="http://superuser.com" title="computer enthusiasts and power users">Super User</a></li>
                        <li><a href="http://webapps.stackexchange.com" title="power users of web applications">Web Applications</a></li>
                        <li><a href="http://askubuntu.com" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                        <li><a href="http://webmasters.stackexchange.com" title="pro webmasters">Webmasters</a></li>
                        <li><a href="http://gamedev.stackexchange.com" title="professional and independent game developers">Game Development</a></li>
                        <li><a href="http://tex.stackexchange.com" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://programmers.stackexchange.com" title="professional programmers interested in conceptual questions about software development">Programmers</a></li>
                        <li><a href="http://unix.stackexchange.com" title="users of Linux, FreeBSD and other Un*x-like operating systems.">Unix &amp; Linux</a></li>
                        <li><a href="http://apple.stackexchange.com" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                        <li><a href="http://wordpress.stackexchange.com" title="WordPress developers and administrators">WordPress Answers</a></li>
                        <li><a href="http://gis.stackexchange.com" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                        <li><a href="http://electronics.stackexchange.com" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                        <li><a href="http://android.stackexchange.com" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                        <li><a href="http://security.stackexchange.com" title="Information security professionals">Information Security</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://dba.stackexchange.com" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                        <li><a href="http://drupal.stackexchange.com" title="Drupal developers and administrators">Drupal Answers</a></li>
                        <li><a href="http://sharepoint.stackexchange.com" title="SharePoint enthusiasts">SharePoint</a></li>
                        <li><a href="http://ux.stackexchange.com" title="user experience researchers and experts">User Experience</a></li>
                        <li><a href="http://mathematica.stackexchange.com" title="users of Mathematica">Mathematica</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#technology" class="more">
                                more (14)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://photo.stackexchange.com" title="professional, enthusiast and amateur photographers">Photography</a></li>
                        <li><a href="http://scifi.stackexchange.com" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                        <li><a href="http://cooking.stackexchange.com" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                        <li><a href="http://diy.stackexchange.com" title="contractors and serious DIYers">Home Improvement</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#lifearts" class="more">
                                more (13)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://english.stackexchange.com" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                        <li><a href="http://skeptics.stackexchange.com" title="scientific skepticism">Skeptics</a></li>
                        <li><a href="http://judaism.stackexchange.com" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                        <li><a href="http://travel.stackexchange.com" title="road warriors and seasoned travelers">Travel</a></li>
                        <li><a href="http://christianity.stackexchange.com" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                        <li><a href="http://gaming.stackexchange.com" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                        <li><a href="http://bicycles.stackexchange.com" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                        <li><a href="http://rpg.stackexchange.com" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#culturerecreation" class="more">
                                more (21)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://math.stackexchange.com" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                        <li><a href="http://stats.stackexchange.com" title="statisticians, data analysts, data miners and data visualization experts">Cross Validated (stats)</a></li>
                        <li><a href="http://cstheory.stackexchange.com" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                        <li><a href="http://physics.stackexchange.com" title="active researchers, academics and students of physics">Physics</a></li>
                        <li><a href="http://mathoverflow.net" title="professional mathematicians">MathOverflow</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#science" class="more">
                                more (7)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://stackapps.com" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                        <li><a href="http://meta.stackoverflow.com" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Overflow</a></li>
                        <li><a href="http://area51.stackexchange.com" title="proposing new sites in the Stack Exchange network">Area 51</a></li>
                        <li><a href="http://careers.stackoverflow.com">Stack Overflow Careers</a></li>
                    
                </ol>
            </td>
    </tr>
</table>
                </div>
            </div>

            <div id="copyright">
                site design / logo &#169; 2013 stack exchange inc; user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc-wiki</a> 
 with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            <div id="footer-flair">
                <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="cc-wiki-link"></a>
            </div>
            <div id="svnrev">
                rev 2013.11.25.1176
            </div>
            
        </div>
    </div>
    <noscript>
        <div id="noscript-warning">Electrical Engineering Stack Exchange works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript>

    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-24']);
        _gaq.push(['_setDomainName','.stackexchange.com']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|op-amp|']); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    var _comscore = _comscore || [];
    (function () {
        var ssl='https:'==document.location.protocol,
            s=document.getElementsByTagName('script')[0],
            ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src=(ssl?'https://ssl':'http://www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src=(ssl?'https://secure':'http://edge')+'.quantserve.com/quant.js';
        s.parentNode.insertBefore(sc, s);
        
        var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
        s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
        el.parentNode.insertBefore(s, el);
        
    })();
    _comscore.push({ c1: "2", c2: "17440561" });
    _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script>        
    
</body>
</html>